<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plugin Store</title>
    <style>
        :root{
            --bg-primary:#ffffff;
            --bg-secondary:#ffffff;
            --bg-tertiary:#f9fafb;
            --text-primary:#333;
            --text-secondary:#666;
            --text-tertiary:#999;
            --border-color:#e5e7eb;
            --shadow:rgba(0,0,0,0.08);
            --shadow-hover:rgba(0,0,0,0.12);
            --card-bg:#ffffff;
            --input-bg:#ffffff;
            --tag-bg:#f3f4f6;
            --tag-hover:#e5e7eb;
            --review-bg:#f9fafb;
            --footer-bg:#6b7280;
        }
        body.dark-mode{
            --bg-primary:#1a1a1a;
            --bg-secondary:#2d2d2d;
            --bg-tertiary:#383838;
            --text-primary:#e5e5e5;
            --text-secondary:#b3b3b3;
            --text-tertiary:#808080;
            --border-color:#404040;
            --shadow:rgba(0,0,0,0.3);
            --shadow-hover:rgba(0,0,0,0.5);
            --card-bg:#2d2d2d;
            --input-bg:#383838;
            --tag-bg:#404040;
            --tag-hover:#4a4a4a;
            --review-bg:#383838;
            --footer-bg:#1f1f1f;
        }
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Segoe UI',sans-serif;background:var(--bg-primary);min-height:100vh;padding:20px;padding-bottom:80px;transition:background 0.3s ease}
        .container{max-width:1400px;margin:0 auto}
        header{background:var(--bg-secondary);padding:30px;border-radius:20px;box-shadow:0 2px 10px var(--shadow);margin-bottom:30px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px;border:1px solid var(--border-color);transition:all 0.3s ease}
        .header-left h1{color:#667eea;font-size:2.5em;margin-bottom:10px}
        .subtitle{color:var(--text-secondary);font-size:1.1em}
        .user-info{text-align:right}
        .user-name{font-size:1.2em;color:var(--text-primary);margin-bottom:5px}
        .user-id{color:var(--text-secondary);font-size:0.9em}
.user-stats{display:flex;gap:8px;margin-top:6px;font-size:0.9em}
.stat-item{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:4px 10px;border-radius:12px}
        .btn-logout{margin-top:10px;padding:8px 20px;background:#ef4444;color:white;border:none;border-radius:8px;cursor:pointer;font-size:0.9em}
        .btn-logout:hover{background:#dc2626}
        .theme-toggle{position:fixed;top:20px;right:20px;background:var(--card-bg);border:2px solid var(--border-color);padding:12px 16px;border-radius:50px;cursor:pointer;font-size:1.5em;box-shadow:0 4px 15px var(--shadow);z-index:1000;transition:all 0.3s ease}
        .theme-toggle:hover{transform:scale(1.1);box-shadow:0 6px 20px var(--shadow-hover)}
        .search-section{background:var(--card-bg);padding:20px;border-radius:15px;margin-bottom:20px;box-shadow:0 2px 10px var(--shadow);border:1px solid var(--border-color);transition:all 0.3s ease}
        .search-bar{display:flex;gap:10px;margin-bottom:15px}
        .search-input{flex:1;padding:15px;border:2px solid var(--border-color);border-radius:10px;font-size:1em;background:var(--input-bg);color:var(--text-primary);transition:all 0.3s ease}
        .search-input:focus{outline:none;border-color:#667eea}
        .btn-search{padding:15px 30px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;border-radius:10px;cursor:pointer;font-size:1em;font-weight:bold}
        .category-tags{display:flex;gap:10px;flex-wrap:wrap}
        .category-tag{padding:8px 15px;background:var(--tag-bg);border:none;border-radius:20px;cursor:pointer;font-size:0.9em;color:var(--text-primary);transition:all 0.3s ease}
        .category-tag:hover{background:var(--tag-hover)}
        .category-tag.active{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white}
        .filters{display:flex;gap:15px;margin-bottom:30px;flex-wrap:wrap;align-items:center}
        .filter-btn{background:var(--card-bg);border:1px solid var(--border-color);padding:12px 25px;border-radius:25px;cursor:pointer;font-size:1em;box-shadow:0 2px 8px var(--shadow);color:var(--text-primary);transition:all 0.3s ease}
        .filter-btn:hover{transform:translateY(-2px);box-shadow:0 3px 10px var(--shadow-hover)}
        .filter-btn.active{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none}
        .sort-select{padding:12px 20px;border:1px solid var(--border-color);border-radius:25px;background:var(--card-bg);cursor:pointer;font-size:1em;box-shadow:0 2px 8px var(--shadow);color:var(--text-primary);transition:all 0.3s ease}
        .plugins-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:25px;margin-bottom:30px}
        .plugin-card{background:var(--card-bg);border-radius:15px;padding:25px;box-shadow:0 2px 10px var(--shadow);border:1px solid var(--border-color);transition:all 0.3s}
        .plugin-card:hover{transform:translateY(-3px);box-shadow:0 4px 15px var(--shadow-hover)}
        .plugin-title{font-size:1.5em;color:var(--text-primary);margin-bottom:5px}
        .plugin-badge{padding:5px 15px;border-radius:20px;font-size:0.85em;font-weight:bold;background:#10b981;color:white}
        .plugin-category{display:inline-block;padding:3px 10px;background:var(--tag-bg);border-radius:10px;font-size:0.8em;color:var(--text-secondary);margin-bottom:10px}
        .plugin-description{color:var(--text-secondary);margin-bottom:15px;line-height:1.6}
        .plugin-version{color:var(--text-tertiary);font-size:0.9em;margin-bottom:15px}
        .plugin-rating{display:flex;align-items:center;gap:5px;margin-bottom:10px}
        .stars{color:#fbbf24}
        .rating-count{color:var(--text-tertiary);font-size:0.9em}
        .plugin-downloads{color:var(--text-secondary);font-size:0.9em;margin-bottom:15px}
        .plugin-footer{display:flex;gap:10px}
        .btn{flex:1;padding:12px;border:none;border-radius:10px;cursor:pointer;font-size:1em;font-weight:bold;transition:all 0.3s}
        .btn-primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white}
        .btn-primary:hover{transform:scale(1.05)}
        .btn-secondary{background:var(--tag-bg);color:#667eea}
        .btn-secondary:hover{background:var(--tag-hover)}
        .header-actions{display:flex;gap:10px;align-items:center}
        .chip-btn{background:#f5f5f5;border:1px solid var(--border-color);color:#111;padding:10px 16px;border-radius:14px;cursor:pointer;box-shadow:0 2px 8px var(--shadow);font-size:0.95em}
        .chip-btn:hover{background:#efefef}
        .user-actions{display:none;gap:10px;margin-top:10px;flex-wrap:wrap}
        .user-actions.show{display:flex}
        .user-info{position:relative}
        .menu-wrapper{position:relative}
        .menu-dropdown{position:absolute;right:0;top:42px;background:var(--card-bg);border:1px solid var(--border-color);border-radius:12px;box-shadow:0 8px 20px var(--shadow);padding:10px;min-width:200px;display:none;z-index:1000}
        .menu-dropdown.show{display:block}
        .menu-item{padding:8px 12px;border-radius:8px;color:var(--text-primary);cursor:pointer}
        .menu-item:hover{background:var(--tag-hover)}
        .menu-item.disabled{cursor:default;color:var(--text-secondary)}
        .menu-item.danger{color:#ef4444}
        .icon{display:inline-flex;align-items:center;justify-content:center;margin-right:8px}
        .icon svg{width:18px;height:18px;display:inline-block}
        .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:1000;justify-content:center;align-items:center}
        .modal.active{display:flex}
        .modal-content{background:var(--card-bg);padding:40px;border-radius:20px;max-width:600px;width:90%;max-height:85vh;overflow-y:auto;box-shadow:0 4px 20px rgba(0,0,0,0.15);transition:all 0.3s ease}
        .modal-header{font-size:1.8em;margin-bottom:20px;color:var(--text-primary)}
        .modal-body{margin-bottom:20px;line-height:1.8;color:var(--text-secondary)}
        .modal-footer{display:flex;gap:10px}
        .form-group{display:flex;flex-direction:column;gap:5px}
        .form-group label{color:var(--text-primary);font-weight:bold}
        .form-group textarea{padding:12px;border:2px solid var(--border-color);border-radius:8px;font-size:1em;font-family:inherit;background:var(--input-bg);color:var(--text-primary);transition:all 0.3s ease}
        .form-group textarea:focus{outline:none;border-color:#667eea}
        .star-rating{display:flex;gap:5px;font-size:2em}
        .star{cursor:pointer;color:#d1d5db}
        .star:hover,.star.active{color:#fbbf24}
        .reviews-section{margin-top:20px;padding-top:20px;border-top:2px solid var(--border-color)}
        .review-item{background:var(--review-bg);padding:15px;border-radius:10px;margin-bottom:15px}
        .review-header{display:flex;justify-content:space-between;margin-bottom:10px}
        .review-author{font-weight:bold;color:var(--text-primary)}
        .review-date{color:var(--text-tertiary);font-size:0.9em}
        .review-text{color:var(--text-secondary);line-height:1.6}
        .history-btn{position:fixed;bottom:90px;right:30px;background:var(--card-bg);padding:15px 20px;border-radius:30px;box-shadow:0 2px 15px var(--shadow);cursor:pointer;z-index:100;font-weight:bold;color:#667eea;border:1px solid var(--border-color);transition:all 0.3s ease;font-size:1em}
        .history-btn:hover{transform:translateY(-3px);box-shadow:0 4px 20px var(--shadow-hover);background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white}
        .history-item{background:var(--review-bg);padding:20px;border-radius:10px;margin-bottom:15px;border-left:4px solid #667eea}
        footer{position:fixed;bottom:0;left:0;width:100%;background:var(--footer-bg);color:white;padding:20px;text-align:center;box-shadow:0 -2px 10px rgba(0,0,0,0.1);transition:all 0.3s ease}
        @media(max-width:768px){.plugins-grid{grid-template-columns:1fr}header{flex-direction:column;text-align:center}.theme-toggle{top:10px;right:10px;padding:10px 14px}}
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" title="ÌÖåÎßà Ï†ÑÌôò"></button>
    <div class="container">
        <header>
            <div class="header-left">
                <h1>üéÆ Plugin Store</h1>
                <p class="subtitle">ÎßàÏù∏ÌÅ¨ÎûòÌîÑÌä∏ ÌîåÎü¨Í∑∏Ïù∏ Ïä§ÌÜ†Ïñ¥</p>
            </div>
            <div class="user-info" id="userInfo">
                <div class="user-top" style="display:flex;align-items:center;gap:12px;justify-content:flex-end">
                    <div class="header-actions">
                        <button id="btnLogin" class="chip-btn" onclick="openLoginModal()">Î°úÍ∑∏Ïù∏</button>
                        <div class="menu-wrapper">
                            <button id="btnMenu" class="chip-btn" onclick="toggleMenuDropdown()">‚ò∞</button>
                            <div id="menuDropdown" class="menu-dropdown">
                                <div class="menu-item" onclick="gotoMyPage()">ÎßàÏù¥ÌéòÏù¥ÏßÄ</div>
                                <div class="menu-item" id="menuAdmin" style="display:none" onclick="openAdmin()">Í¥ÄÎ¶¨ Ìà¥</div>
                                <div class="menu-item danger" onclick="logout()">Î°úÍ∑∏ÏïÑÏõÉ</div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <p class="user-name" id="userName"></p>
                        <p class="user-id" id="userIdDisplay"></p>
                    </div>
                </div>
                <div class="user-stats">
                    <span class="stat-item"><span class="icon" data-icon="wallet"><svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 10H1.75C1.75 10.6904 2.30964 11.25 3 11.25L3 10ZM3 14L3 12.75C2.30964 12.75 1.75 13.3096 1.75 14H3ZM21 10V11.25C21.6904 11.25 22.25 10.6904 22.25 10H21ZM21 14H22.25C22.25 13.3096 21.6904 12.75 21 12.75V14ZM5 6.25H10V3.75H5V6.25ZM10 6.25H19V3.75H10V6.25ZM19 17.75H10V20.25H19V17.75ZM10 17.75H5V20.25H10V17.75ZM8.75 5V19H11.25V5H8.75ZM3.53033 11.4697C3.82322 11.7626 3.82322 12.2374 3.53033 12.5303L5.2981 14.2981C6.5673 13.0289 6.5673 10.9711 5.2981 9.7019L3.53033 11.4697ZM20.4697 12.5303C20.1768 12.2374 20.1768 11.7626 20.4697 11.4697L18.7019 9.7019C17.4327 10.9711 17.4327 13.0289 18.7019 14.2981L20.4697 12.5303ZM3 11.25C3.19388 11.25 3.38364 11.323 3.53033 11.4697L5.2981 9.7019C4.66374 9.06755 3.82981 8.75 3 8.75L3 11.25ZM4.25 10V7H1.75V10H4.25ZM4.25 17V14H1.75V17H4.25ZM3.53033 12.5303C3.38364 12.677 3.19388 12.75 3 12.75L3 15.25C3.82981 15.25 4.66374 14.9325 5.2981 14.2981L3.53033 12.5303ZM20.4697 11.4697C20.6164 11.323 20.8061 11.25 21 11.25V8.75C20.1702 8.75 19.3363 9.06755 18.7019 9.7019L20.4697 11.4697ZM19.75 7V10H22.25V7H19.75ZM19.75 14C19.75 14.0015 19.75 14.0029 19.75 14.0044C19.75 14.0059 19.75 14.0073 19.75 14.0088C19.75 14.0103 19.75 14.0118 19.75 14.0132C19.75 14.0147 19.75 14.0162 19.75 14.0176C19.75 14.0191 19.75 14.0206 19.75 14.0221C19.75 14.0236 19.75 14.025 19.75 14.0265C19.75 14.028 19.75 14.0295 19.75 14.031C19.75 14.0325 19.75 14.0339 19.75 14.0354C19.75 14.0369 19.75 14.0384 19.75 14.0399C19.75 14.0414 19.75 14.0429 19.75 14.0444C19.75 14.0459 19.75 14.0474 19.75 14.0489C19.75 14.0504 19.75 14.0519 19.75 14.0534C19.75 14.0549 19.75 14.0564 19.75 14.0579C19.75 14.0594 19.75 14.0609 19.75 14.0624C19.75 14.0639 19.75 14.0654 19.75 14.0669C19.75 14.0684 19.75 14.0699 19.75 14.0714C19.75 14.0729 19.75 14.0744 19.75 14.0759C19.75 14.0775 19.75 14.079 19.75 14.0805C19.75 14.082 19.75 14.0835 19.75 14.085C19.75 14.0866 19.75 14.0881 19.75 14.0896C19.75 14.0911 19.75 14.0927 19.75 14.0942C19.75 14.0957 19.75 14.0972 19.75 14.0988C19.75 14.1003 19.75 14.1018 19.75 14.1033C19.75 14.1049 19.75 14.1064 19.75 14.1079C19.75 14.1095 19.75 14.111 19.75 14.1125C19.75 14.1141 19.75 14.1156 19.75 14.1171C19.75 14.1187 19.75 14.1202 19.75 14.1218C19.75 14.1233 19.75 14.1248 19.75 14.1264C19.75 14.1279 19.75 14.1295 19.75 14.131C19.75 14.1326 19.75 14.1341 19.75 14.1357C19.75 14.1372 19.75 14.1388 19.75 14.1403C19.75 14.1419 19.75 14.1434 19.75 14.145C19.75 14.1465 19.75 14.1481 19.75 14.1496C19.75 14.1512 19.75 14.1528 19.75 14.1543C19.75 14.1559 19.75 14.1574 19.75 14.159C19.75 14.1606 19.75 14.1621 19.75 14.1637C19.75 14.1653 19.75 14.1668 19.75 14.1684C19.75 14.17 19.75 14.1715 19.75 14.1731C19.75 14.1747 19.75 14.1762 19.75 14.1778C19.75 14.1794 19.75 14.181 19.75 14.1825C19.75 14.1841 19.75 14.1857 19.75 14.1873C19.75 14.1889 19.75 14.1904 19.75 14.192C19.75 14.1936 19.75 14.1952 19.75 14.1968C19.75 14.1983 19.75 14.1999 19.75 14.2015C19.75 14.2031 19.75 14.2047 19.75 14.2063C19.75 14.2079 19.75 14.2095 19.75 14.2111C19.75 14.2126 19.75 14.2142 19.75 14.2158C19.75 14.2174 19.75 14.219 19.75 14.2206C19.75 14.2222 19.75 14.2238 19.75 14.2254C19.75 14.227 19.75 14.2286 19.75 14.2302C19.75 14.2318 19.75 14.2334 19.75 14.235C19.75 14.2366 19.75 14.2382 19.75 14.2398C19.75 14.2415 19.75 14.2431 19.75 14.2447C19.75 14.2463 19.75 14.2479 19.75 14.2495C19.75 14.2511 19.75 14.2527 19.75 14.2543C19.75 14.256 19.75 14.2576 19.75 14.2592C19.75 14.2608 19.75 14.2624 19.75 14.264C19.75 14.2657 19.75 14.2673 19.75 14.2689C19.75 14.2705 19.75 14.2722 19.75 14.2738C19.75 14.2754 19.75 14.277 19.75 14.2787C19.75 14.2803 19.75 14.2819 19.75 14.2836C19.75 14.2852 19.75 14.2868 19.75 14.2884C19.75 14.2901 19.75 14.2917 19.75 14.2934C19.75 14.295 19.75 14.2966 19.75 14.2983C19.75 14.2999 19.75 14.3015 19.75 14.3032C19.75 14.3048 19.75 14.3065 19.75 14.3081C19.75 14.3097 19.75 14.3114 19.75 14.313C19.75 14.3147 19.75 14.3163 19.75 14.318C19.75 14.3196 19.75 14.3213 19.75 14.3229C19.75 14.3246 19.75 14.3262 19.75 14.3279C19.75 14.3295 19.75 14.3312 19.75 14.3328C19.75 14.3345 19.75 14.3362 19.75 14.3378C19.75 14.3395 19.75 14.3411 19.75 14.3428C19.75 14.3445 19.75 14.3461 19.75 14.3478C19.75 14.3494 19.75 14.3511 19.75 14.3528C19.75 14.3544 19.75 14.3561 19.75 14.3578C19.75 14.3594 19.75 14.3611 19.75 14.3628C19.75 14.3644 19.75 14.3661 19.75 14.3678C19.75 14.3695 19.75 14.3711 19.75 14.3728C19.75 14.3745 19.75 14.3762 19.75 14.3778C19.75 14.3795 19.75 14.3812 19.75 14.3829C19.75 14.3846 19.75 14.3862 19.75 14.3879C19.75 14.3896 19.75 14.3913 19.75 14.393C19.75 14.3947 19.75 14.3963 19.75 14.398C19.75 14.3997 19.75 14.4014 19.75 14.4031C19.75 14.4048 19.75 14.4065 19.75 14.4082C19.75 14.4099 19.75 14.4116 19.75 14.4133C19.75 14.4149 19.75 14.4166 19.75 14.4183C19.75 14.42 19.75 14.4217 19.75 14.4234C19.75 14.4251 19.75 14.4268 19.75 14.4285C19.75 14.4302 19.75 14.4319 19.75 14.4336C19.75 14.4353 19.75 14.4371 19.75 14.4388C19.75 14.4405 19.75 14.4422 19.75 14.4439C19.75 14.4456 19.75 14.4473 19.75 14.449C19.75 14.4507 19.75 14.4524 19.75 14.4541C19.75 14.4559 19.75 14.4576 19.75 14.4593C19.75 14.461 19.75 14.4627 19.75 14.4644C19.75 14.4662 19.75 14.4679 19.75 14.4696C19.75 14.4713 19.75 14.473 19.75 14.4748C19.75 14.4765 19.75 14.4782 19.75 14.4799C19.75 14.4817 19.75 14.4834 19.75 14.4851C19.75 14.4868 19.75 14.4886 19.75 14.4903C19.75 14.492 19.75 14.4938 19.75 14.4955C19.75 14.4972 19.75 14.499 19.75 14.5007C19.75 14.5024 19.75 14.5042 19.75 14.5059C19.75 14.5076 19.75 14.5094 19.75 14.5111C19.75 14.5128 19.75 14.5146 19.75 14.5163C19.75 14.5181 19.75 14.5198 19.75 14.5216C19.75 14.5233 19.75 14.525 19.75 14.5268C19.75 14.5285 19.75 14.5303 19.75 14.532C19.75 14.5338 19.75 14.5355 19.75 14.5373C19.75 14.539 19.75 14.5408 19.75 14.5425C19.75 14.5443 19.75 14.546 19.75 14.5478C19.75 14.5495 19.75 14.5513 19.75 14.5531C19.75 14.5548 19.75 14.5566 19.75 14.5583C19.75 14.5601 19.75 14.5619 19.75 14.5636C19.75 14.5654 19.75 14.5671 19.75 14.5689C19.75 14.5707 19.75 14.5724 19.75 14.5742C19.75 14.576 19.75 14.5777 19.75 14.5795C19.75 14.5813 19.75 14.583 19.75 14.5848C19.75 14.5866 19.75 14.5883 19.75 14.5901C19.75 14.5919 19.75 14.5937 19.75 14.5954C19.75 14.5972 19.75 14.599 19.75 14.6008C19.75 14.6025 19.75 14.6043 19.75 14.6061C19.75 14.6079 19.75 14.6097 19.75 14.6114C19.75 14.6132 19.75 14.615 19.75 14.6168C19.75 14.6186 19.75 14.6204 19.75 14.6221C19.75 14.6239 19.75 14.6257 19.75 14.6275C19.75 14.6293 19.75 14.6311 19.75 14.6329C19.75 14.6347 19.75 14.6364 19.75 14.6382C19.75 14.64 19.75 14.6418 19.75 14.6436C19.75 14.6454 19.75 14.6472 19.75 14.649C19.75 14.6508 19.75 14.6526 19.75 14.6544C19.75 14.6562 19.75 14.658 19.75 14.6598C19.75 14.6616 19.75 14.6634 19.75 14.6652C19.75 14.667 19.75 14.6688 19.75 14.6706C19.75 14.6724 19.75 14.6742 19.75 14.676C19.75 14.6778 19.75 14.6796 19.75 14.6814C19.75 14.6833 19.75 14.6851 19.75 14.6869C19.75 14.6887 19.75 14.6905 19.75 14.6923C19.75 14.6941 19.75 14.6959 19.75 14.6978C19.75 14.6996 19.75 14.7014 19.75 14.7032C19.75 14.705 19.75 14.7068 19.75 14.7087C19.75 14.7105 19.75 14.7123 19.75 14.7141C19.75 14.7159 19.75 14.7178 19.75 14.7196C19.75 14.7214 19.75 14.7232 19.75 14.7251C19.75 14.7269 19.75 14.7287 19.75 14.7305C19.75 14.7324 19.75 14.7342 19.75 14.736C19.75 14.7378 19.75 14.7397 19.75 14.7415C19.75 14.7433 19.75 14.7452 19.75 14.747C19.75 14.7488 19.75 14.7507 19.75 14.7525C19.75 14.7543 19.75 14.7562 19.75 14.758C19.75 14.7599 19.75 14.7617 19.75 14.7635C19.75 14.7654 19.75 14.7672 19.75 14.7691C19.75 14.7709 19.75 14.7727 19.75 14.7746C19.75 14.7764 19.75 14.7783 19.75 14.7801C19.75 14.782 19.75 14.7838 19.75 14.7857C19.75 14.7875 19.75 14.7894 19.75 14.7912C19.75 14.7931 19.75 14.7949 19.75 14.7968C19.75 14.7986 19.75 14.8005 19.75 14.8023C19.75 14.8042 19.75 14.806 19.75 14.8079C19.75 14.8097 19.75 14.8116 19.75 14.8134C19.75 14.8153 19.75 14.8172 19.75 14.819C19.75 14.8209 19.75 14.8227 19.75 14.8246C19.75 14.8265 19.75 14.8283 19.75 14.8302C19.75 14.8321 19.75 14.8339 19.75 14.8358C19.75 14.8376 19.75 14.8395 19.75 14.8414C19.75 14.8433 19.75 14.8451 19.75 14.847C19.75 14.8489 19.75 14.8507 19.75 14.8526C19.75 14.8545 19.75 14.8563 19.75 14.8582C19.75 14.8601 19.75 14.862 19.75 14.8638C19.75 14.8657 19.75 14.8676 19.75 14.8695C19.75 14.8713 19.75 14.8732 19.75 14.8751C19.75 14.877 19.75 14.8789 19.75 14.8807C19.75 14.8826 19.75 14.8845 19.75 14.8864C19.75 14.8883 19.75 14.8901 19.75 14.892C19.75 14.8939 19.75 14.8958 19.75 14.8977C19.75 14.8996 19.75 14.9015 19.75 14.9033C19.75 14.9052 19.75 14.9071 19.75 14.909C19.75 14.9109 19.75 14.9128 19.75 14.9147C19.75 14.9166 19.75 14.9185 19.75 14.9204C19.75 14.9223 19.75 14.9241 19.75 14.926C19.75 14.9279 19.75 14.9298 19.75 14.9317C19.75 14.9336 19.75 14.9355 19.75 14.9374C19.75 14.9393 19.75 14.9412 19.75 14.9431C19.75 14.945 19.75 14.9469 19.75 14.9488C19.75 14.9507 19.75 14.9526 19.75 14.9545C19.75 14.9564 19.75 14.9584 19.75 14.9603C19.75 14.9622 19.75 14.9641 19.75 14.966C19.75 14.9679 19.75 14.9698 19.75 14.9717C19.75 14.9736 19.75 14.9755 19.75 14.9774C19.75 14.9794 19.75 14.9813 19.75 14.9832C19.75 14.9851 19.75 14.987 19.75 14.9889C19.75 14.9908 19.75 14.9928 19.75 14.9947C19.75 14.9966 19.75 14.9985 19.75 15.0004C19.75 15.0023 19.75 15.0043 19.75 15.0062C19.75 15.0081 19.75 15.01 19.75 15.012C19.75 15.0139 19.75 15.0158 19.75 15.0177C19.75 15.0196 19.75 15.0216 19.75 15.0235C19.75 15.0254 19.75 15.0273 19.75 15.0293C19.75 15.0312 19.75 15.0331 19.75 15.0351C19.75 15.037 19.75 15.0389 19.75 15.0409C19.75 15.0428 19.75 15.0447 19.75 15.0466C19.75 15.0486 19.75 15.0505 19.75 15.0524C19.75 15.0544 19.75 15.0563 19.75 15.0583C19.75 15.0602 19.75 15.0621 19.75 15.0641C19.75 15.066 19.75 15.0679 19.75 15.0699C19.75 15.0718 19.75 15.0738 19.75 15.0757C19.75 15.0776 19.75 15.0796 19.75 15.0815C19.75 15.0835 19.75 15.0854 19.75 15.0874C19.75 15.0893 19.75 15.0913 19.75 15.0932C19.75 15.0951 19.75 15.0971 19.75 15.099C19.75 15.101 19.75 15.1029 19.75 15.1049C19.75 15.1068 19.75 15.1088 19.75 15.1107C19.75 15.1127 19.75 15.1146 19.75 15.1166C19.75 15.1185 19.75 15.1205 19.75 15.1225C19.75 15.1244 19.75 15.1264 19.75 15.1283C19.75 15.1303 19.75 15.1322 19.75 15.1342C19.75 15.1362 19.75 15.1381 19.75 15.1401C19.75 15.142 19.75 15.144 19.75 15.146C19.75 15.1479 19.75 15.1499 19.75 15.1518C19.75 15.1538 19.75 15.1558 19.75 15.1577C19.75 15.1597 19.75 15.1617 19.75 15.1636C19.75 15.1656 19.75 15.1676 19.75 15.1695C19.75 15.1715 19.75 15.1735 19.75 15.1754C19.75 15.1774 19.75 15.1794 19.75 15.1813C19.75 15.1833 19.75 15.1853 19.75 15.1873C19.75 15.1892 19.75 15.1912 19.75 15.1932C19.75 15.1952 19.75 15.1971 19.75 15.1991C19.75 15.2011 19.75 15.2031 19.75 15.205C19.75 15.207 19.75 15.209 19.75 15.211C19.75 15.2129 19.75 15.2149 19.75 15.2169C19.75 15.2189 19.75 15.2209 19.75 15.2228C19.75 15.2248 19.75 15.2268 19.75 15.2288C19.75 15.2308 19.75 15.2328 19.75 15.2347C19.75 15.2367 19.75 15.2387 19.75 15.2407C19.75 15.2427 19.75 15.2447 19.75 15.2467C19.75 15.2487 19.75 15.2506 19.75 15.2526C19.75 15.2546 19.75 15.2566 19.75 15.2586C19.75 15.2606 19.75 15.2626 19.75 15.2646C19.75 15.2666 19.75 15.2686 19.75 15.2706C19.75 15.2726 19.75 15.2745 19.75 15.2765C19.75 15.2785 19.75 15.2805 19.75 15.2825C19.75 15.2845 19.75 15.2865 19.75 15.2885C19.75 15.2905 19.75 15.2925 19.75 15.2945C19.75 15.2965 19.75 15.2985 19.75 15.3005C19.75 15.3025 19.75 15.3045 19.75 15.3065C19.75 15.3085 19.75 15.3105 19.75 15.3125C19.75 15.3145 19.75 15.3166 19.75 15.3186C19.75 15.3206 19.75 15.3226 19.75 15.3246C19.75 15.3266 19.75 15.3286 19.75 15.3306C19.75 15.3326 19.75 15.3346 19.75 15.3366C19.75 15.3386 19.75 15.3407 19.75 15.3427C19.75 15.3447 19.75 15.3467 19.75 15.3487C19.75 15.3507 19.75 15.3527 19.75 15.3547C19.75 15.3568 19.75 15.3588 19.75 15.3608C19.75 15.3628 19.75 15.3648 19.75 15.3668C19.75 15.3689 19.75 15.3709 19.75 15.3729C19.75 15.3749 19.75 15.3769 19.75 15.379C19.75 15.381 19.75 15.383 19.75 15.385C19.75 15.387 19.75 15.3891 19.75 15.3911C19.75 15.3931 19.75 15.3951 19.75 15.3972C19.75 15.3992 19.75 15.4012 19.75 15.4032C19.75 15.4053 19.75 15.4073 19.75 15.4093C19.75 15.4113 19.75 15.4134 19.75 15.4154C19.75 15.4174 19.75 15.4194 19.75 15.4215C19.75 15.4235 19.75 15.4255 19.75 15.4276C19.75 15.4296 19.75 15.4316 19.75 15.4337C19.75 15.4357 19.75 15.4377 19.75 15.4398C19.75 15.4418 19.75 15.4438 19.75 15.4459C19.75 15.4479 19.75 15.4499 19.75 15.452C19.75 15.454 19.75 15.456 19.75 15.4581C19.75 15.4601 19.75 15.4622 19.75 15.4642C19.75 15.4662 19.75 15.4683 19.75 15.4703C19.75 15.4724 19.75 15.4744 19.75 15.4764C19.75 15.4785 19.75 15.4805 19.75 15.4826C19.75 15.4846 19.75 15.4867 19.75 15.4887C19.75 15.4907 19.75 15.4928 19.75 15.4948C19.75 15.4969 19.75 15.4989 19.75 15.501C19.75 15.503 19.75 15.5051 19.75 15.5071C19.75 15.5092 19.75 15.5112 19.75 15.5133C19.75 15.5153 19.75 15.5174 19.75 15.5194C19.75 15.5215 19.75 15.5235 19.75 15.5256C19.75 15.5276 19.75 15.5297 19.75 15.5317C19.75 15.5338 19.75 15.5358 19.75 15.5379C19.75 15.5399 19.75 15.542 19.75 15.5441C19.75 15.5461 19.75 15.5482 19.75 15.5502C19.75 15.5523 19.75 15.5543 19.75 15.5564C19.75 15.5585 19.75 15.5605 19.75 15.5626C19.75 15.5646 19.75 15.5667 19.75 15.5688C19.75 15.5708 19.75 15.5729 19.75 15.5749C19.75 15.577 19.75 15.5791 19.75 15.5811C19.75 15.5832 19.75 15.5853 19.75 15.5873C19.75 15.5894 19.75 15.5915 19.75 15.5935C19.75 15.5956 19.75 15.5977 19.75 15.5997C19.75 15.6018 19.75 15.6039 19.75 15.6059C19.75 15.608 19.75 15.6101 19.75 15.6121C19.75 15.6142 19.75 15.6163 19.75 15.6183C19.75 15.6204 19.75 15.6225 19.75 15.6245C19.75 15.6266 19.75 15.6287 19.75 15.6308C19.75 15.6328 19.75 15.6349 19.75 15.637C19.75 15.6391 19.75 15.6411 19.75 15.6432C19.75 15.6453 19.75 15.6474 19.75 15.6494C19.75 15.6515 19.75 15.6536 19.75 15.6557C19.75 15.6577 19.75 15.6598 19.75 15.6619C19.75 15.664 19.75 15.6661 19.75 15.6681C19.75 15.6702 19.75 15.6723 19.75 15.6744C19.75 15.6765 19.75 15.6785 19.75 15.6806C19.75 15.6827 19.75 15.6848 19.75 15.6869C19.75 15.6889 19.75 15.691 19.75 15.6931C19.75 15.6952 19.75 15.6973 19.75 15.6994C19.75 15.7015 19.75 15.7035 19.75 15.7056C19.75 15.7077 19.75 15.7098 19.75 15.7119C19.75 15.714 19.75 15.7161 19.75 15.7182C19.75 15.7202 19.75 15.7223 19.75 15.7244C19.75 15.7265 19.75 15.7286 19.75 15.7307C19.75 15.7328 19.75 15.7349 19.75 15.737C19.75 15.7391 19.75 15.7411 19.75 15.7432C19.75 15.7453 19.75 15.7474 19.75 15.7495C19.75 15.7516 19.75 15.7537 19.75 15.7558C19.75 15.7579 19.75 15.76 19.75 15.7621C19.75 15.7642 19.75 15.7663 19.75 15.7684C19.75 15.7705 19.75 15.7726 19.75 15.7747C19.75 15.7768 19.75 15.7789 19.75 15.781C19.75 15.7831 19.75 15.7852 19.75 15.7873C19.75 15.7894 19.75 15.7915 19.75 15.7936C19.75 15.7957 19.75 15.7978 19.75 15.7999C19.75 15.802 19.75 15.8041 19.75 15.8062C19.75 15.8083 19.75 15.8104 19.75 15.8125C19.75 15.8146 19.75 15.8167 19.75 15.8188C19.75 15.8209 19.75 15.823 19.75 15.8251C19.75 15.8272 19.75 15.8293 19.75 15.8314C19.75 15.8335 19.75 15.8356 19.75 15.8378C19.75 15.8399 19.75 15.842 19.75 15.8441C19.75 15.8462 19.75 15.8483 19.75 15.8504C19.75 15.8525 19.75 15.8546 19.75 15.8567C19.75 15.8589 19.75 15.861 19.75 15.8631C19.75 15.8652 19.75 15.8673 19.75 15.8694C19.75 15.8715 19.75 15.8736 19.75 15.8758C19.75 15.8779 19.75 15.88 19.75 15.8821C19.75 15.8842 19.75 15.8863 19.75 15.8884C19.75 15.8906 19.75 15.8927 19.75 15.8948C19.75 15.8969 19.75 15.899 19.75 15.9011C19.75 15.9033 19.75 15.9054 19.75 15.9075C19.75 15.9096 19.75 15.9117 19.75 15.9138C19.75 15.916 19.75 15.9181 19.75 15.9202C19.75 15.9223 19.75 15.9244 19.75 15.9266C19.75 15.9287 19.75 15.9308 19.75 15.9329C19.75 15.9351 19.75 15.9372 19.75 15.9393C19.75 15.9414 19.75 15.9435 19.75 15.9457C19.75 15.9478 19.75 15.9499 19.75 15.952C19.75 15.9542 19.75 15.9563 19.75 15.9584C19.75 15.9605 19.75 15.9627 19.75 15.9648C19.75 15.9669 19.75 15.969 19.75 15.9712C19.75 15.9733 19.75 15.9754 19.75 15.9776C19.75 15.9797 19.75 15.9818 19.75 15.9839C19.75 15.9861 19.75 15.9882 19.75 15.9903C19.75 15.9925 19.75 15.9946 19.75 15.9967C19.75 15.9989 19.75 16.001 19.75 16.0031C19.75 16.0052 19.75 16.0074 19.75 16.0095C19.75 16.0116 19.75 16.0138 19.75 16.0159C19.75 16.018 19.75 16.0202 19.75 16.0223C19.75 16.0244 19.75 16.0266 19.75 16.0287C19.75 16.0308 19.75 16.033 19.75 16.0351C19.75 16.0372 19.75 16.0394 19.75 16.0415C19.75 16.0437 19.75 16.0458 19.75 16.0479C19.75 16.0501 19.75 16.0522 19.75 16.0543C19.75 16.0565 19.75 16.0586 19.75 16.0608C19.75 16.0629 19.75 16.065 19.75 16.0672C19.75 16.0693 19.75 16.0715 19.75 16.0736C19.75 16.0757 19.75 16.0779 19.75 16.08C19.75 16.0822 19.75 16.0843 19.75 16.0864C19.75 16.0886 19.75 16.0907 19.75 16.0929C19.75 16.095 19.75 16.0971 19.75 16.0993C19.75 16.1014 19.75 16.1036 19.75 16.1057C19.75 16.1079 19.75 16.11 19.75 16.1122C19.75 16.1143 19.75 16.1164 19.75 16.1186C19.75 16.1207 19.75 16.1229 19.75 16.125C19.75 16.1272 19.75 16.1293 19.75 16.1315C19.75 16.1336 19.75 16.1358 19.75 16.1379C19.75 16.1401 19.75 16.1422 19.75 16.1443C19.75 16.1465 19.75 16.1486 19.75 16.1508C19.75 16.1529 19.75 16.1551 19.75 16.1572C19.75 16.1594 19.75 16.1615 19.75 16.1637C19.75 16.1658 19.75 16.168 19.75 16.1701C19.75 16.1723 19.75 16.1744 19.75 16.1766C19.75 16.1787 19.75 16.1809 19.75 16.183C19.75 16.1852 19.75 16.1874 19.75 16.1895C19.75 16.1917 19.75 16.1938 19.75 16.196C19.75 16.1981 19.75 16.2003 19.75 16.2024C19.75 16.2046 19.75 16.2067 19.75 16.2089C19.75 16.211 19.75 16.2132 19.75 16.2154C19.75 16.2175 19.75 16.2197 19.75 16.2218C19.75 16.224 19.75 16.2261 19.75 16.2283C19.75 16.2304 19.75 16.2326 19.75 16.2348C19.75 16.2369 19.75 16.2391 19.75 16.2412C19.75 16.2434 19.75 16.2456 19.75 16.2477C19.75 16.2499 19.75 16.252 19.75 16.2542C19.75 16.2563 19.75 16.2585 19.75 16.2607C19.75 16.2628 19.75 16.265 19.75 16.2671C19.75 16.2693 19.75 16.2715 19.75 16.2736C19.75 16.2758 19.75 16.2779 19.75 16.2801C19.75 16.2823 19.75 16.2844 19.75 16.2866C19.75 16.2888 19.75 16.2909 19.75 16.2931C19.75 16.2952 19.75 16.2974 19.75 16.2996C19.75 16.3017 19.75 16.3039 19.75 16.3061C19.75 16.3082 19.75 16.3104 19.75 16.3126C19.75 16.3147 19.75 16.3169 19.75 16.319C19.75 16.3212 19.75 16.3234 19.75 16.3255C19.75 16.3277 19.75 16.3299 19.75 16.332C19.75 16.3342 19.75 16.3364 19.75 16.3385C19.75 16.3407 19.75 16.3429 19.75 16.345C19.75 16.3472 19.75 16.3494 19.75 16.3515C19.75 16.3537 19.75 16.3559 19.75 16.358C19.75 16.3602 19.75 16.3624 19.75 16.3645C19.75 16.3667 19.75 16.3689 19.75 16.371C19.75 16.3732 19.75 16.3754 19.75 16.3776C19.75 16.3797 19.75 16.3819 19.75 16.3841C19.75 16.3862 19.75 16.3884 19.75 16.3906C19.75 16.3927 19.75 16.3949 19.75 16.3971C19.75 16.3993 19.75 16.4014 19.75 16.4036C19.75 16.4058 19.75 16.4079 19.75 16.4101C19.75 16.4123 19.75 16.4145 19.75 16.4166C19.75 16.4188 19.75 16.421 19.75 16.4232C19.75 16.4253 19.75 16.4275 19.75 16.4297C19.75 16.4318 19.75 16.434 19.75 16.4362C19.75 16.4384 19.75 16.4405 19.75 16.4427C19.75 16.4449 19.75 16.4471 19.75 16.4492C19.75 16.4514 19.75 16.4536 19.75 16.4558C19.75 16.4579 19.75 16.4601 19.75 16.4623C19.75 16.4645 19.75 16.4666 19.75 16.4688C19.75 16.471 19.75 16.4732 19.75 16.4753C19.75 16.4775 19.75 16.4797 19.75 16.4819C19.75 16.484 19.75 16.4862 19.75 16.4884C19.75 16.4906 19.75 16.4927 19.75 16.4949C19.75 16.4971 19.75 16.4993 19.75 16.5015C19.75 16.5036 19.75 16.5058 19.75 16.508C19.75 16.5102 19.75 16.5123 19.75 16.5145C19.75 16.5167 19.75 16.5189 19.75 16.5211C19.75 16.5232 19.75 16.5254 19.75 16.5276C19.75 16.5298 19.75 16.532 19.75 16.5341C19.75 16.5363 19.75 16.5385 19.75 16.5407C19.75 16.5429 19.75 16.545 19.75 16.5472C19.75 16.5494 19.75 16.5516 19.75 16.5538C19.75 16.5559 19.75 16.5581 19.75 16.5603C19.75 16.5625 19.75 16.5647 19.75 16.5668C19.75 16.569 19.75 16.5712 19.75 16.5734C19.75 16.5756 19.75 16.5778 19.75 16.5799C19.75 16.5821 19.75 16.5843 19.75 16.5865C19.75 16.5887 19.75 16.5908 19.75 16.593C19.75 16.5952 19.75 16.5974 19.75 16.5996C19.75 16.6018 19.75 16.6039 19.75 16.6061C19.75 16.6083 19.75 16.6105 19.75 16.6127C19.75 16.6149 19.75 16.617 19.75 16.6192C19.75 16.6214 19.75 16.6236 19.75 16.6258C19.75 16.628 19.75 16.6301 19.75 16.6323C19.75 16.6345 19.75 16.6367 19.75 16.6389C19.75 16.6411 19.75 16.6432 19.75 16.6454C19.75 16.6476 19.75 16.6498 19.75 16.652C19.75 16.6542 19.75 16.6564 19.75 16.6585C19.75 16.6607 19.75 16.6629 19.75 16.6651C19.75 16.6673 19.75 16.6695 19.75 16.6717C19.75 16.6738 19.75 16.676 19.75 16.6782C19.75 16.6804 19.75 16.6826 19.75 16.6848C19.75 16.687 19.75 16.6891 19.75 16.6913C19.75 16.6935 19.75 16.6957 19.75 16.6979C19.75 16.7001 19.75 16.7023 19.75 16.7044C19.75 16.7066 19.75 16.7088 19.75 16.711C19.75 16.7132 19.75 16.7154 19.75 16.7176C19.75 16.7198 19.75 16.7219 19.75 16.7241C19.75 16.7263 19.75 16.7285 19.75 16.7307C19.75 16.7329 19.75 16.7351 19.75 16.7373C19.75 16.7394 19.75 16.7416 19.75 16.7438C19.75 16.746 19.75 16.7482 19.75 16.7504C19.75 16.7526 19.75 16.7548 19.75 16.7569C19.75 16.7591 19.75 16.7613 19.75 16.7635C19.75 16.7657 19.75 16.7679 19.75 16.7701C19.75 16.7723 19.75 16.7745 19.75 16.7766C19.75 16.7788 19.75 16.781 19.75 16.7832C19.75 16.7854 19.75 16.7876 19.75 16.7898C19.75 16.792 19.75 16.7942 19.75 16.7963C19.75 16.7985 19.75 16.8007 19.75 16.8029C19.75 16.8051 19.75 16.8073 19.75 16.8095C19.75 16.8117 19.75 16.8139 19.75 16.816C19.75 16.8182 19.75 16.8204 19.75 16.8226C19.75 16.8248 19.75 16.827 19.75 16.8292C19.75 16.8314 19.75 16.8336 19.75 16.8357C19.75 16.8379 19.75 16.8401 19.75 16.8423C19.75 16.8445 19.75 16.8467 19.75 16.8489C19.75 16.8511 19.75 16.8533 19.75 16.8555C19.75 16.8576 19.75 16.8598 19.75 16.862C19.75 16.8642 19.75 16.8664 19.75 16.8686C19.75 16.8708 19.75 16.873 19.75 16.8752C19.75 16.8774 19.75 16.8795 19.75 16.8817C19.75 16.8839 19.75 16.8861 19.75 16.8883C19.75 16.8905 19.75 16.8927 19.75 16.8949C19.75 16.8971 19.75 16.8993 19.75 16.9014C19.75 16.9036 19.75 16.9058 19.75 16.908C19.75 16.9102 19.75 16.9124 19.75 16.9146C19.75 16.9168 19.75 16.919 19.75 16.9212C19.75 16.9234 19.75 16.9255 19.75 16.9277C19.75 16.9299 19.75 16.9321 19.75 16.9343C19.75 16.9365 19.75 16.9387 19.75 16.9409C19.75 16.9431 19.75 16.9453 19.75 16.9474C19.75 16.9496 19.75 16.9518 19.75 16.954C19.75 16.9562 19.75 16.9584 19.75 16.9606C19.75 16.9628 19.75 16.965 19.75 16.9672C19.75 16.9693 19.75 16.9715 19.75 16.9737C19.75 16.9759 19.75 16.9781 19.75 16.9803C19.75 16.9825 19.75 16.9847 19.75 16.9869C19.75 16.9891 19.75 16.9912 19.75 16.9934C19.75 16.9956 19.75 16.9978 19.75 17H22.25C22.25 16.9978 22.25 16.9956 22.25 16.9934C22.25 16.9912 22.25 16.9891 22.25 16.9869C22.25 16.9847 22.25 16.9825 22.25 16.9803C22.25 16.9781 22.25 16.9759 22.25 16.9737C22.25 16.9715 22.25 16.9693 22.25 16.9672C22.25 16.965 22.25 16.9628 22.25 16.9606C22.25 16.9584 22.25 16.9562 22.25 16.954C22.25 16.9518 22.25 16.9496 22.25 16.9474C22.25 16.9453 22.25 16.9431 22.25 16.9409C22.25 16.9387 22.25 16.9365 22.25 16.9343C22.25 16.9321 22.25 16.9299 22.25 16.9277C22.25 16.9255 22.25 16.9234 22.25 16.9212C22.25 16.919 22.25 16.9168 22.25 16.9146C22.25 16.9124 22.25 16.9102 22.25 16.908C22.25 16.9058 22.25 16.9036 22.25 16.9014C22.25 16.8993 22.25 16.8971 22.25 16.8949C22.25 16.8927 22.25 16.8905 22.25 16.8883C22.25 16.8861 22.25 16.8839 22.25 16.8817C22.25 16.8795 22.25 16.8774 22.25 16.8752C22.25 16.873 22.25 16.8708 22.25 16.8686C22.25 16.8664 22.25 16.8642 22.25 16.862C22.25 16.8598 22.25 16.8576 22.25 16.8555C22.25 16.8533 22.25 16.8511 22.25 16.8489C22.25 16.8467 22.25 16.8445 22.25 16.8423C22.25 16.8401 22.25 16.8379 22.25 16.8357C22.25 16.8336 22.25 16.8314 22.25 16.8292C22.25 16.827 22.25 16.8248 22.25 16.8226C22.25 16.8204 22.25 16.8182 22.25 16.816C22.25 16.8139 22.25 16.8117 22.25 16.8095C22.25 16.8073 22.25 16.8051 22.25 16.8029C22.25 16.8007 22.25 16.7985 22.25 16.7963C22.25 16.7942 22.25 16.792 22.25 16.7898C22.25 16.7876 22.25 16.7854 22.25 16.7832C22.25 16.781 22.25 16.7788 22.25 16.7766C22.25 16.7745 22.25 16.7723 22.25 16.7701C22.25 16.7679 22.25 16.7657 22.25 16.7635C22.25 16.7613 22.25 16.7591 22.25 16.7569C22.25 16.7548 22.25 16.7526 22.25 16.7504C22.25 16.7482 22.25 16.746 22.25 16.7438C22.25 16.7416 22.25 16.7394 22.25 16.7373C22.25 16.7351 22.25 16.7329 22.25 16.7307C22.25 16.7285 22.25 16.7263 22.25 16.7241C22.25 16.7219 22.25 16.7198 22.25 16.7176C22.25 16.7154 22.25 16.7132 22.25 16.711C22.25 16.7088 22.25 16.7066 22.25 16.7044C22.25 16.7023 22.25 16.7001 22.25 16.6979C22.25 16.6957 22.25 16.6935 22.25 16.6913C22.25 16.6891 22.25 16.687 22.25 16.6848C22.25 16.6826 22.25 16.6804 22.25 16.6782C22.25 16.676 22.25 16.6738 22.25 16.6717C22.25 16.6695 22.25 16.6673 22.25 16.6651C22.25 16.6629 22.25 16.6607 22.25 16.6585C22.25 16.6564 22.25 16.6542 22.25 16.652C22.25 16.6498 22.25 16.6476 22.25 16.6454C22.25 16.6432 22.25 16.6411 22.25 16.6389C22.25 16.6367 22.25 16.6345 22.25 16.6323C22.25 16.6301 22.25 16.628 22.25 16.6258C22.25 16.6236 22.25 16.6214 22.25 16.6192C22.25 16.617 22.25 16.6149 22.25 16.6127C22.25 16.6105 22.25 16.6083 22.25 16.6061C22.25 16.6039 22.25 16.6018 22.25 16.5996C22.25 16.5974 22.25 16.5952 22.25 16.593C22.25 16.5908 22.25 16.5887 22.25 16.5865C22.25 16.5843 22.25 16.5821 22.25 16.5799C22.25 16.5778 22.25 16.5756 22.25 16.5734C22.25 16.5712 22.25 16.569 22.25 16.5668C22.25 16.5647 22.25 16.5625 22.25 16.5603C22.25 16.5581 22.25 16.5559 22.25 16.5538C22.25 16.5516 22.25 16.5494 22.25 16.5472C22.25 16.545 22.25 16.5429 22.25 16.5407C22.25 16.5385 22.25 16.5363 22.25 16.5341C22.25 16.532 22.25 16.5298 22.25 16.5276C22.25 16.5254 22.25 16.5232 22.25 16.5211C22.25 16.5189 22.25 16.5167 22.25 16.5145C22.25 16.5123 22.25 16.5102 22.25 16.508C22.25 16.5058 22.25 16.5036 22.25 16.5015C22.25 16.4993 22.25 16.4971 22.25 16.4949C22.25 16.4927 22.25 16.4906 22.25 16.4884C22.25 16.4862 22.25 16.484 22.25 16.4819C22.25 16.4797 22.25 16.4775 22.25 16.4753C22.25 16.4732 22.25 16.471 22.25 16.4688C22.25 16.4666 22.25 16.4645 22.25 16.4623C22.25 16.4601 22.25 16.4579 22.25 16.4558C22.25 16.4536 22.25 16.4514 22.25 16.4492C22.25 16.4471 22.25 16.4449 22.25 16.4427C22.25 16.4405 22.25 16.4384 22.25 16.4362C22.25 16.434 22.25 16.4318 22.25 16.4297C22.25 16.4275 22.25 16.4253 22.25 16.4232C22.25 16.421 22.25 16.4188 22.25 16.4166C22.25 16.4145 22.25 16.4123 22.25 16.4101C22.25 16.4079 22.25 16.4058 22.25 16.4036C22.25 16.4014 22.25 16.3993 22.25 16.3971C22.25 16.3949 22.25 16.3927 22.25 16.3906C22.25 16.3884 22.25 16.3862 22.25 16.3841C22.25 16.3819 22.25 16.3797 22.25 16.3776C22.25 16.3754 22.25 16.3732 22.25 16.371C22.25 16.3689 22.25 16.3667 22.25 16.3645C22.25 16.3624 22.25 16.3602 22.25 16.358C22.25 16.3559 22.25 16.3537 22.25 16.3515C22.25 16.3494 22.25 16.3472 22.25 16.345C22.25 16.3429 22.25 16.3407 22.25 16.3385C22.25 16.3364 22.25 16.3342 22.25 16.332C22.25 16.3299 22.25 16.3277 22.25 16.3255C22.25 16.3234 22.25 16.3212 22.25 16.319C22.25 16.3169 22.25 16.3147 22.25 16.3126C22.25 16.3104 22.25 16.3082 22.25 16.3061C22.25 16.3039 22.25 16.3017 22.25 16.2996C22.25 16.2974 22.25 16.2952 22.25 16.2931C22.25 16.2909 22.25 16.2888 22.25 16.2866C22.25 16.2844 22.25 16.2823 22.25 16.2801C22.25 16.2779 22.25 16.2758 22.25 16.2736C22.25 16.2715 22.25 16.2693 22.25 16.2671C22.25 16.265 22.25 16.2628 22.25 16.2607C22.25 16.2585 22.25 16.2563 22.25 16.2542C22.25 16.252 22.25 16.2499 22.25 16.2477C22.25 16.2456 22.25 16.2434 22.25 16.2412C22.25 16.2391 22.25 16.2369 22.25 16.2348C22.25 16.2326 22.25 16.2304 22.25 16.2283C22.25 16.2261 22.25 16.224 22.25 16.2218C22.25 16.2197 22.25 16.2175 22.25 16.2154C22.25 16.2132 22.25 16.211 22.25 16.2089C22.25 16.2067 22.25 16.2046 22.25 16.2024C22.25 16.2003 22.25 16.1981 22.25 16.196C22.25 16.1938 22.25 16.1917 22.25 16.1895C22.25 16.1874 22.25 16.1852 22.25 16.183C22.25 16.1809 22.25 16.1787 22.25 16.1766C22.25 16.1744 22.25 16.1723 22.25 16.1701C22.25 16.168 22.25 16.1658 22.25 16.1637C22.25 16.1615 22.25 16.1594 22.25 16.1572C22.25 16.1551 22.25 16.1529 22.25 16.1508C22.25 16.1486 22.25 16.1465 22.25 16.1443C22.25 16.1422 22.25 16.1401 22.25 16.1379C22.25 16.1358 22.25 16.1336 22.25 16.1315C22.25 16.1293 22.25 16.1272 22.25 16.125C22.25 16.1229 22.25 16.1207 22.25 16.1186C22.25 16.1164 22.25 16.1143 22.25 16.1122C22.25 16.11 22.25 16.1079 22.25 16.1057C22.25 16.1036 22.25 16.1014 22.25 16.0993C22.25 16.0971 22.25 16.095 22.25 16.0929C22.25 16.0907 22.25 16.0886 22.25 16.0864C22.25 16.0843 22.25 16.0822 22.25 16.08C22.25 16.0779 22.25 16.0757 22.25 16.0736C22.25 16.0715 22.25 16.0693 22.25 16.0672C22.25 16.065 22.25 16.0629 22.25 16.0608C22.25 16.0586 22.25 16.0565 22.25 16.0543C22.25 16.0522 22.25 16.0501 22.25 16.0479C22.25 16.0458 22.25 16.0437 22.25 16.0415C22.25 16.0394 22.25 16.0372 22.25 16.0351C22.25 16.033 22.25 16.0308 22.25 16.0287C22.25 16.0266 22.25 16.0244 22.25 16.0223C22.25 16.0202 22.25 16.018 22.25 16.0159C22.25 16.0138 22.25 16.0116 22.25 16.0095C22.25 16.0074 22.25 16.0052 22.25 16.0031C22.25 16.001 22.25 15.9989 22.25 15.9967C22.25 15.9946 22.25 15.9925 22.25 15.9903C22.25 15.9882 22.25 15.9861 22.25 15.9839C22.25 15.9818 22.25 15.9797 22.25 15.9776C22.25 15.9754 22.25 15.9733 22.25 15.9712C22.25 15.969 22.25 15.9669 22.25 15.9648C22.25 15.9627 22.25 15.9605 22.25 15.9584C22.25 15.9563 22.25 15.9542 22.25 15.952C22.25 15.9499 22.25 15.9478 22.25 15.9457C22.25 15.9435 22.25 15.9414 22.25 15.9393C22.25 15.9372 22.25 15.9351 22.25 15.9329C22.25 15.9308 22.25 15.9287 22.25 15.9266C22.25 15.9244 22.25 15.9223 22.25 15.9202C22.25 15.9181 22.25 15.916 22.25 15.9138C22.25 15.9117 22.25 15.9096 22.25 15.9075C22.25 15.9054 22.25 15.9033 22.25 15.9011C22.25 15.899 22.25 15.8969 22.25 15.8948C22.25 15.8927 22.25 15.8906 22.25 15.8884C22.25 15.8863 22.25 15.8842 22.25 15.8821C22.25 15.88 22.25 15.8779 22.25 15.8758C22.25 15.8736 22.25 15.8715 22.25 15.8694C22.25 15.8673 22.25 15.8652 22.25 15.8631C22.25 15.861 22.25 15.8589 22.25 15.8567C22.25 15.8546 22.25 15.8525 22.25 15.8504C22.25 15.8483 22.25 15.8462 22.25 15.8441C22.25 15.842 22.25 15.8399 22.25 15.8378C22.25 15.8356 22.25 15.8335 22.25 15.8314C22.25 15.8293 22.25 15.8272 22.25 15.8251C22.25 15.823 22.25 15.8209 22.25 15.8188C22.25 15.8167 22.25 15.8146 22.25 15.8125C22.25 15.8104 22.25 15.8083 22.25 15.8062C22.25 15.8041 22.25 15.802 22.25 15.7999C22.25 15.7978 22.25 15.7957 22.25 15.7936C22.25 15.7915 22.25 15.7894 22.25 15.7873C22.25 15.7852 22.25 15.7831 22.25 15.781C22.25 15.7789 22.25 15.7768 22.25 15.7747C22.25 15.7726 22.25 15.7705 22.25 15.7684C22.25 15.7663 22.25 15.7642 22.25 15.7621C22.25 15.76 22.25 15.7579 22.25 15.7558C22.25 15.7537 22.25 15.7516 22.25 15.7495C22.25 15.7474 22.25 15.7453 22.25 15.7432C22.25 15.7411 22.25 15.7391 22.25 15.737C22.25 15.7349 22.25 15.7328 22.25 15.7307C22.25 15.7286 22.25 15.7265 22.25 15.7244C22.25 15.7223 22.25 15.7202 22.25 15.7182C22.25 15.7161 22.25 15.714 22.25 15.7119C22.25 15.7098 22.25 15.7077 22.25 15.7056C22.25 15.7035 22.25 15.7015 22.25 15.6994C22.25 15.6973 22.25 15.6952 22.25 15.6931C22.25 15.691 22.25 15.6889 22.25 15.6869C22.25 15.6848 22.25 15.6827 22.25 15.6806C22.25 15.6785 22.25 15.6765 22.25 15.6744C22.25 15.6723 22.25 15.6702 22.25 15.6681C22.25 15.6661 22.25 15.664 22.25 15.6619C22.25 15.6598 22.25 15.6577 22.25 15.6557C22.25 15.6536 22.25 15.6515 22.25 15.6494C22.25 15.6474 22.25 15.6453 22.25 15.6432C22.25 15.6411 22.25 15.6391 22.25 15.637C22.25 15.6349 22.25 15.6328 22.25 15.6308C22.25 15.6287 22.25 15.6266 22.25 15.6245C22.25 15.6225 22.25 15.6204 22.25 15.6183C22.25 15.6163 22.25 15.6142 22.25 15.6121C22.25 15.6101 22.25 15.608 22.25 15.6059C22.25 15.6039 22.25 15.6018 22.25 15.5997C22.25 15.5977 22.25 15.5956 22.25 15.5935C22.25 15.5915 22.25 15.5894 22.25 15.5873C22.25 15.5853 22.25 15.5832 22.25 15.5811C22.25 15.5791 22.25 15.577 22.25 15.5749C22.25 15.5729 22.25 15.5708 22.25 15.5688C22.25 15.5667 22.25 15.5646 22.25 15.5626C22.25 15.5605 22.25 15.5585 22.25 15.5564C22.25 15.5543 22.25 15.5523 22.25 15.5502C22.25 15.5482 22.25 15.5461 22.25 15.5441C22.25 15.542 22.25 15.5399 22.25 15.5379C22.25 15.5358 22.25 15.5338 22.25 15.5317C22.25 15.5297 22.25 15.5276 22.25 15.5256C22.25 15.5235 22.25 15.5215 22.25 15.5194C22.25 15.5174 22.25 15.5153 22.25 15.5133C22.25 15.5112 22.25 15.5092 22.25 15.5071C22.25 15.5051 22.25 15.503 22.25 15.501C22.25 15.4989 22.25 15.4969 22.25 15.4948C22.25 15.4928 22.25 15.4907 22.25 15.4887C22.25 15.4867 22.25 15.4846 22.25 15.4826C22.25 15.4805 22.25 15.4785 22.25 15.4764C22.25 15.4744 22.25 15.4724 22.25 15.4703C22.25 15.4683 22.25 15.4662 22.25 15.4642C22.25 15.4622 22.25 15.4601 22.25 15.4581C22.25 15.456 22.25 15.454 22.25 15.452C22.25 15.4499 22.25 15.4479 22.25 15.4459C22.25 15.4438 22.25 15.4418 22.25 15.4398C22.25 15.4377 22.25 15.4357 22.25 15.4337C22.25 15.4316 22.25 15.4296 22.25 15.4276C22.25 15.4255 22.25 15.4235 22.25 15.4215C22.25 15.4194 22.25 15.4174 22.25 15.4154C22.25 15.4134 22.25 15.4113 22.25 15.4093C22.25 15.4073 22.25 15.4053 22.25 15.4032C22.25 15.4012 22.25 15.3992 22.25 15.3972C22.25 15.3951 22.25 15.3931 22.25 15.3911C22.25 15.3891 22.25 15.387 22.25 15.385C22.25 15.383 22.25 15.381 22.25 15.379C22.25 15.3769 22.25 15.3749 22.25 15.3729C22.25 15.3709 22.25 15.3689 22.25 15.3668C22.25 15.3648 22.25 15.3628 22.25 15.3608C22.25 15.3588 22.25 15.3568 22.25 15.3547C22.25 15.3527 22.25 15.3507 22.25 15.3487C22.25 15.3467 22.25 15.3447 22.25 15.3427C22.25 15.3407 22.25 15.3386 22.25 15.3366C22.25 15.3346 22.25 15.3326 22.25 15.3306C22.25 15.3286 22.25 15.3266 22.25 15.3246C22.25 15.3226 22.25 15.3206 22.25 15.3186C22.25 15.3166 22.25 15.3145 22.25 15.3125C22.25 15.3105 22.25 15.3085 22.25 15.3065C22.25 15.3045 22.25 15.3025 22.25 15.3005C22.25 15.2985 22.25 15.2965 22.25 15.2945C22.25 15.2925 22.25 15.2905 22.25 15.2885C22.25 15.2865 22.25 15.2845 22.25 15.2825C22.25 15.2805 22.25 15.2785 22.25 15.2765C22.25 15.2745 22.25 15.2726 22.25 15.2706C22.25 15.2686 22.25 15.2666 22.25 15.2646C22.25 15.2626 22.25 15.2606 22.25 15.2586C22.25 15.2566 22.25 15.2546 22.25 15.2526C22.25 15.2506 22.25 15.2487 22.25 15.2467C22.25 15.2447 22.25 15.2427 22.25 15.2407C22.25 15.2387 22.25 15.2367 22.25 15.2347C22.25 15.2328 22.25 15.2308 22.25 15.2288C22.25 15.2268 22.25 15.2248 22.25 15.2228C22.25 15.2209 22.25 15.2189 22.25 15.2169C22.25 15.2149 22.25 15.2129 22.25 15.211C22.25 15.209 22.25 15.207 22.25 15.205C22.25 15.2031 22.25 15.2011 22.25 15.1991C22.25 15.1971 22.25 15.1952 22.25 15.1932C22.25 15.1912 22.25 15.1892 22.25 15.1873C22.25 15.1853 22.25 15.1833 22.25 15.1813C22.25 15.1794 22.25 15.1774 22.25 15.1754C22.25 15.1735 22.25 15.1715 22.25 15.1695C22.25 15.1676 22.25 15.1656 22.25 15.1636C22.25 15.1617 22.25 15.1597 22.25 15.1577C22.25 15.1558 22.25 15.1538 22.25 15.1518C22.25 15.1499 22.25 15.1479 22.25 15.146C22.25 15.144 22.25 15.142 22.25 15.1401C22.25 15.1381 22.25 15.1362 22.25 15.1342C22.25 15.1322 22.25 15.1303 22.25 15.1283C22.25 15.1264 22.25 15.1244 22.25 15.1225C22.25 15.1205 22.25 15.1185 22.25 15.1166C22.25 15.1146 22.25 15.1127 22.25 15.1107C22.25 15.1088 22.25 15.1068 22.25 15.1049C22.25 15.1029 22.25 15.101 22.25 15.099C22.25 15.0971 22.25 15.0951 22.25 15.0932C22.25 15.0913 22.25 15.0893 22.25 15.0874C22.25 15.0854 22.25 15.0835 22.25 15.0815C22.25 15.0796 22.25 15.0776 22.25 15.0757C22.25 15.0738 22.25 15.0718 22.25 15.0699C22.25 15.0679 22.25 15.066 22.25 15.0641C22.25 15.0621 22.25 15.0602 22.25 15.0583C22.25 15.0563 22.25 15.0544 22.25 15.0524C22.25 15.0505 22.25 15.0486 22.25 15.0466C22.25 15.0447 22.25 15.0428 22.25 15.0409C22.25 15.0389 22.25 15.037 22.25 15.0351C22.25 15.0331 22.25 15.0312 22.25 15.0293C22.25 15.0273 22.25 15.0254 22.25 15.0235C22.25 15.0216 22.25 15.0196 22.25 15.0177C22.25 15.0158 22.25 15.0139 22.25 15.012C22.25 15.01 22.25 15.0081 22.25 15.0062C22.25 15.0043 22.25 15.0023 22.25 15.0004C22.25 14.9985 22.25 14.9966 22.25 14.9947C22.25 14.9928 22.25 14.9908 22.25 14.9889C22.25 14.987 22.25 14.9851 22.25 14.9832C22.25 14.9813 22.25 14.9794 22.25 14.9774C22.25 14.9755 22.25 14.9736 22.25 14.9717C22.25 14.9698 22.25 14.9679 22.25 14.966C22.25 14.9641 22.25 14.9622 22.25 14.9603C22.25 14.9584 22.25 14.9564 22.25 14.9545C22.25 14.9526 22.25 14.9507 22.25 14.9488C22.25 14.9469 22.25 14.945 22.25 14.9431C22.25 14.9412 22.25 14.9393 22.25 14.9374C22.25 14.9355 22.25 14.9336 22.25 14.9317C22.25 14.9298 22.25 14.9279 22.25 14.926C22.25 14.9241 22.25 14.9223 22.25 14.9204C22.25 14.9185 22.25 14.9166 22.25 14.9147C22.25 14.9128 22.25 14.9109 22.25 14.909C22.25 14.9071 22.25 14.9052 22.25 14.9033C22.25 14.9015 22.25 14.8996 22.25 14.8977C22.25 14.8958 22.25 14.8939 22.25 14.892C22.25 14.8901 22.25 14.8883 22.25 14.8864C22.25 14.8845 22.25 14.8826 22.25 14.8807C22.25 14.8789 22.25 14.877 22.25 14.8751C22.25 14.8732 22.25 14.8713 22.25 14.8695C22.25 14.8676 22.25 14.8657 22.25 14.8638C22.25 14.862 22.25 14.8601 22.25 14.8582C22.25 14.8563 22.25 14.8545 22.25 14.8526C22.25 14.8507 22.25 14.8489 22.25 14.847C22.25 14.8451 22.25 14.8433 22.25 14.8414C22.25 14.8395 22.25 14.8376 22.25 14.8358C22.25 14.8339 22.25 14.8321 22.25 14.8302C22.25 14.8283 22.25 14.8265 22.25 14.8246C22.25 14.8227 22.25 14.8209 22.25 14.819C22.25 14.8172 22.25 14.8153 22.25 14.8134C22.25 14.8116 22.25 14.8097 22.25 14.8079C22.25 14.806 22.25 14.8042 22.25 14.8023C22.25 14.8005 22.25 14.7986 22.25 14.7968C22.25 14.7949 22.25 14.7931 22.25 14.7912C22.25 14.7894 22.25 14.7875 22.25 14.7857C22.25 14.7838 22.25 14.782 22.25 14.7801C22.25 14.7783 22.25 14.7764 22.25 14.7746C22.25 14.7727 22.25 14.7709 22.25 14.7691C22.25 14.7672 22.25 14.7654 22.25 14.7635C22.25 14.7617 22.25 14.7599 22.25 14.758C22.25 14.7562 22.25 14.7543 22.25 14.7525C22.25 14.7507 22.25 14.7488 22.25 14.747C22.25 14.7452 22.25 14.7433 22.25 14.7415C22.25 14.7397 22.25 14.7378 22.25 14.736C22.25 14.7342 22.25 14.7324 22.25 14.7305C22.25 14.7287 22.25 14.7269 22.25 14.7251C22.25 14.7232 22.25 14.7214 22.25 14.7196C22.25 14.7178 22.25 14.7159 22.25 14.7141C22.25 14.7123 22.25 14.7105 22.25 14.7087C22.25 14.7068 22.25 14.705 22.25 14.7032C22.25 14.7014 22.25 14.6996 22.25 14.6978C22.25 14.6959 22.25 14.6941 22.25 14.6923C22.25 14.6905 22.25 14.6887 22.25 14.6869C22.25 14.6851 22.25 14.6833 22.25 14.6814C22.25 14.6796 22.25 14.6778 22.25 14.676C22.25 14.6742 22.25 14.6724 22.25 14.6706C22.25 14.6688 22.25 14.667 22.25 14.6652C22.25 14.6634 22.25 14.6616 22.25 14.6598C22.25 14.658 22.25 14.6562 22.25 14.6544C22.25 14.6526 22.25 14.6508 22.25 14.649C22.25 14.6472 22.25 14.6454 22.25 14.6436C22.25 14.6418 22.25 14.64 22.25 14.6382C22.25 14.6364 22.25 14.6347 22.25 14.6329C22.25 14.6311 22.25 14.6293 22.25 14.6275C22.25 14.6257 22.25 14.6239 22.25 14.6221C22.25 14.6204 22.25 14.6186 22.25 14.6168C22.25 14.615 22.25 14.6132 22.25 14.6114C22.25 14.6097 22.25 14.6079 22.25 14.6061C22.25 14.6043 22.25 14.6025 22.25 14.6008C22.25 14.599 22.25 14.5972 22.25 14.5954C22.25 14.5937 22.25 14.5919 22.25 14.5901C22.25 14.5883 22.25 14.5866 22.25 14.5848C22.25 14.583 22.25 14.5813 22.25 14.5795C22.25 14.5777 22.25 14.576 22.25 14.5742C22.25 14.5724 22.25 14.5707 22.25 14.5689C22.25 14.5671 22.25 14.5654 22.25 14.5636C22.25 14.5619 22.25 14.5601 22.25 14.5583C22.25 14.5566 22.25 14.5548 22.25 14.5531C22.25 14.5513 22.25 14.5495 22.25 14.5478C22.25 14.546 22.25 14.5443 22.25 14.5425C22.25 14.5408 22.25 14.539 22.25 14.5373C22.25 14.5355 22.25 14.5338 22.25 14.532C22.25 14.5303 22.25 14.5285 22.25 14.5268C22.25 14.525 22.25 14.5233 22.25 14.5216C22.25 14.5198 22.25 14.5181 22.25 14.5163C22.25 14.5146 22.25 14.5128 22.25 14.5111C22.25 14.5094 22.25 14.5076 22.25 14.5059C22.25 14.5042 22.25 14.5024 22.25 14.5007C22.25 14.499 22.25 14.4972 22.25 14.4955C22.25 14.4938 22.25 14.492 22.25 14.4903C22.25 14.4886 22.25 14.4868 22.25 14.4851C22.25 14.4834 22.25 14.4817 22.25 14.4799C22.25 14.4782 22.25 14.4765 22.25 14.4748C22.25 14.473 22.25 14.4713 22.25 14.4696C22.25 14.4679 22.25 14.4662 22.25 14.4644C22.25 14.4627 22.25 14.461 22.25 14.4593C22.25 14.4576 22.25 14.4559 22.25 14.4541C22.25 14.4524 22.25 14.4507 22.25 14.449C22.25 14.4473 22.25 14.4456 22.25 14.4439C22.25 14.4422 22.25 14.4405 22.25 14.4388C22.25 14.4371 22.25 14.4353 22.25 14.4336C22.25 14.4319 22.25 14.4302 22.25 14.4285C22.25 14.4268 22.25 14.4251 22.25 14.4234C22.25 14.4217 22.25 14.42 22.25 14.4183C22.25 14.4166 22.25 14.4149 22.25 14.4133C22.25 14.4116 22.25 14.4099 22.25 14.4082C22.25 14.4065 22.25 14.4048 22.25 14.4031C22.25 14.4014 22.25 14.3997 22.25 14.398C22.25 14.3963 22.25 14.3947 22.25 14.393C22.25 14.3913 22.25 14.3896 22.25 14.3879C22.25 14.3862 22.25 14.3846 22.25 14.3829C22.25 14.3812 22.25 14.3795 22.25 14.3778C22.25 14.3762 22.25 14.3745 22.25 14.3728C22.25 14.3711 22.25 14.3695 22.25 14.3678C22.25 14.3661 22.25 14.3644 22.25 14.3628C22.25 14.3611 22.25 14.3594 22.25 14.3578C22.25 14.3561 22.25 14.3544 22.25 14.3528C22.25 14.3511 22.25 14.3494 22.25 14.3478C22.25 14.3461 22.25 14.3445 22.25 14.3428C22.25 14.3411 22.25 14.3395 22.25 14.3378C22.25 14.3362 22.25 14.3345 22.25 14.3328C22.25 14.3312 22.25 14.3295 22.25 14.3279C22.25 14.3262 22.25 14.3246 22.25 14.3229C22.25 14.3213 22.25 14.3196 22.25 14.318C22.25 14.3163 22.25 14.3147 22.25 14.313C22.25 14.3114 22.25 14.3097 22.25 14.3081C22.25 14.3065 22.25 14.3048 22.25 14.3032C22.25 14.3015 22.25 14.2999 22.25 14.2983C22.25 14.2966 22.25 14.295 22.25 14.2934C22.25 14.2917 22.25 14.2901 22.25 14.2884C22.25 14.2868 22.25 14.2852 22.25 14.2836C22.25 14.2819 22.25 14.2803 22.25 14.2787C22.25 14.277 22.25 14.2754 22.25 14.2738C22.25 14.2722 22.25 14.2705 22.25 14.2689C22.25 14.2673 22.25 14.2657 22.25 14.264C22.25 14.2624 22.25 14.2608 22.25 14.2592C22.25 14.2576 22.25 14.256 22.25 14.2543C22.25 14.2527 22.25 14.2511 22.25 14.2495C22.25 14.2479 22.25 14.2463 22.25 14.2447C22.25 14.2431 22.25 14.2415 22.25 14.2398C22.25 14.2382 22.25 14.2366 22.25 14.235C22.25 14.2334 22.25 14.2318 22.25 14.2302C22.25 14.2286 22.25 14.227 22.25 14.2254C22.25 14.2238 22.25 14.2222 22.25 14.2206C22.25 14.219 22.25 14.2174 22.25 14.2158C22.25 14.2142 22.25 14.2126 22.25 14.2111C22.25 14.2095 22.25 14.2079 22.25 14.2063C22.25 14.2047 22.25 14.2031 22.25 14.2015C22.25 14.1999 22.25 14.1983 22.25 14.1968C22.25 14.1952 22.25 14.1936 22.25 14.192C22.25 14.1904 22.25 14.1889 22.25 14.1873C22.25 14.1857 22.25 14.1841 22.25 14.1825C22.25 14.181 22.25 14.1794 22.25 14.1778C22.25 14.1762 22.25 14.1747 22.25 14.1731C22.25 14.1715 22.25 14.17 22.25 14.1684C22.25 14.1668 22.25 14.1653 22.25 14.1637C22.25 14.1621 22.25 14.1606 22.25 14.159C22.25 14.1574 22.25 14.1559 22.25 14.1543C22.25 14.1528 22.25 14.1512 22.25 14.1496C22.25 14.1481 22.25 14.1465 22.25 14.145C22.25 14.1434 22.25 14.1419 22.25 14.1403C22.25 14.1388 22.25 14.1372 22.25 14.1357C22.25 14.1341 22.25 14.1326 22.25 14.131C22.25 14.1295 22.25 14.1279 22.25 14.1264C22.25 14.1248 22.25 14.1233 22.25 14.1218C22.25 14.1202 22.25 14.1187 22.25 14.1171C22.25 14.1156 22.25 14.1141 22.25 14.1125C22.25 14.111 22.25 14.1095 22.25 14.1079C22.25 14.1064 22.25 14.1049 22.25 14.1033C22.25 14.1018 22.25 14.1003 22.25 14.0988C22.25 14.0972 22.25 14.0957 22.25 14.0942C22.25 14.0927 22.25 14.0911 22.25 14.0896C22.25 14.0881 22.25 14.0866 22.25 14.085C22.25 14.0835 22.25 14.082 22.25 14.0805C22.25 14.079 22.25 14.0775 22.25 14.0759C22.25 14.0744 22.25 14.0729 22.25 14.0714C22.25 14.0699 22.25 14.0684 22.25 14.0669C22.25 14.0654 22.25 14.0639 22.25 14.0624C22.25 14.0609 22.25 14.0594 22.25 14.0579C22.25 14.0564 22.25 14.0549 22.25 14.0534C22.25 14.0519 22.25 14.0504 22.25 14.0489C22.25 14.0474 22.25 14.0459 22.25 14.0444C22.25 14.0429 22.25 14.0414 22.25 14.0399C22.25 14.0384 22.25 14.0369 22.25 14.0354C22.25 14.0339 22.25 14.0325 22.25 14.031C22.25 14.0295 22.25 14.028 22.25 14.0265C22.25 14.025 22.25 14.0236 22.25 14.0221C22.25 14.0206 22.25 14.0191 22.25 14.0176C22.25 14.0162 22.25 14.0147 22.25 14.0132C22.25 14.0118 22.25 14.0103 22.25 14.0088C22.25 14.0073 22.25 14.0059 22.25 14.0044C22.25 14.0029 22.25 14.0015 22.25 14H19.75ZM21 12.75C20.8061 12.75 20.6164 12.677 20.4697 12.5303L18.7019 14.2981C19.3363 14.9325 20.1702 15.25 21 15.25V12.75ZM5 17.75C4.58579 17.75 4.25 17.4142 4.25 17H1.75C1.75 18.7949 3.20507 20.25 5 20.25V17.75ZM19 20.25C20.7949 20.25 22.25 18.7949 22.25 17H19.75C19.75 17.4142 19.4142 17.75 19 17.75V20.25ZM19 6.25C19.4142 6.25 19.75 6.58579 19.75 7H22.25C22.25 5.20507 20.7949 3.75 19 3.75V6.25ZM5 3.75C3.20507 3.75 1.75 5.20507 1.75 7H4.25C4.25 6.58579 4.58579 6.25 5 6.25V3.75Z" fill="#292929"></path>
</svg></svg></span> <span id="userBalance">0</span>Ïõê</span>
                    <span class="stat-item"><span class="icon" data-icon="download"><svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v12"></path><path d="M7 10l5 5 5-5"></path><path d="M5 21h14"></path></svg></span> <span id="downloadCount">0</span>Í∞ú</span>
                    <span class="stat-item"><span class="icon" data-icon="star"><svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg></span> <span id="avgRating">0.0</span></span>
                </div>
                
            </div>
        </header>
        <div class="search-section">
            <div class="search-bar">
                <input type="text" class="search-input" id="searchInput" placeholder="Í≤ÄÏÉâ...">
                <button id="btnSearch" class="btn-search" onclick="searchPlugins()"></button>
            </div>
            <div class="category-tags">
                <button class="category-tag active" data-category="all">Ï†ÑÏ≤¥</button>
                <button class="category-tag" data-category="Í≤åÏûÑÌîåÎ†àÏù¥">Í≤åÏûÑÌîåÎ†àÏù¥</button>
                <button class="category-tag" data-category="ÏãúÏä§ÌÖú">ÏãúÏä§ÌÖú</button>
                <button class="category-tag" data-category="Ïª§Ïä§ÌÖÄ">Ïª§Ïä§ÌÖÄ</button>
                <button class="category-tag" data-category="RPG">RPG</button>
                <button class="category-tag" data-category="Í≤ΩÏ†ú">Í≤ΩÏ†ú</button>
            </div>
        </div>
        <div class="filters">
            <button class="filter-btn active" data-filter="all">Ï†ÑÏ≤¥</button>
            <button class="filter-btn" data-filter="free">Î¨¥Î£å</button>
            <button class="filter-btn" data-filter="premium">ÌîÑÎ¶¨ÎØ∏ÏóÑ</button>
            <button class="filter-btn" data-filter="downloaded">Îã§Ïö¥Î°úÎìúÌï®</button>
            <select class="sort-select" id="sortSelect">
                <option value="popular">Ïù∏Í∏∞Ïàú</option>
                <option value="rating">ÌèâÏ†êÏàú</option>
                <option value="downloads">Îã§Ïö¥Î°úÎìúÏàú</option>
            </select>
        </div>
        <div class="plugins-grid" id="pluginsGrid"></div>
    </div>
    <footer>
        <p>ÎåÄÌëú Í≥†Í∞ÄÏò® | Ïù¥Î©îÏùº: <a href="mailto:gogaon036@gmail.com">gogaon036@gmail.com</a></p>
    </footer>
    <div class="modal" id="detailModal">
        <div class="modal-content">
            <h2 class="modal-header" id="modalTitle"></h2>
            <div class="modal-body" id="modalBody"></div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDetailModal()">Îã´Í∏∞</button>
                <button class="btn btn-primary" id="modalAction"></button>
            </div>
        </div>
    </div>
    <div class="modal" id="reviewModal">
        <div class="modal-content">
            <h2 class="modal-header">‚≠ê Î¶¨Î∑∞ ÏûëÏÑ±</h2>
            <div class="modal-body">
                <div class="form-group">
                    <label>ÌèâÏ†ê</label>
                    <div class="star-rating" id="starRating">
                        <span class="star" data-rating="1">‚òÖ</span>
                        <span class="star" data-rating="2">‚òÖ</span>
                        <span class="star" data-rating="3">‚òÖ</span>
                        <span class="star" data-rating="4">‚òÖ</span>
                        <span class="star" data-rating="5">‚òÖ</span>
                    </div>
                </div>
                <div class="form-group"><label>Î¶¨Î∑∞</label><textarea id="reviewText" rows="5"></textarea></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeReviewModal()">Ï∑®ÏÜå</button>
                <button class="btn btn-primary" onclick="submitReview()">Îì±Î°ù</button>
            </div>
        </div>
    </div>
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h2 class="modal-header">üîë Î°úÍ∑∏Ïù∏</h2>
            <div class="modal-body">
                <div class="form-group">
                    <label>ÎßàÏù∏ÌÅ¨ÎûòÌîÑÌä∏ ÎãâÎÑ§ÏûÑ</label>
                    <input type="text" id="loginMinecraftName" placeholder="ÌîåÎ†àÏù¥Ïñ¥Îãâ" style="width:100%;padding:12px;border:2px solid var(--border-color);border-radius:8px;font-size:1em;background:var(--input-bg);color:var(--text-primary)">
                </div>
                <p style="margin-top:10px;color:var(--text-tertiary)">Î°úÍ∑∏Ïù∏ ÌõÑ ÌîåÎü¨Í∑∏Ïù∏ Îã§Ïö¥Î°úÎìú/Íµ¨Îß§Í∞Ä Í∞ÄÎä•Ìï©ÎãàÎã§.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeLoginModal()">Ï∑®ÏÜå</button>
                <button class="btn btn-primary" onclick="submitLogin()">Î°úÍ∑∏Ïù∏</button>
            </div>
        </div>
    </div>
    <div class="modal" id="historyModal">
        <div class="modal-content">
            <h2 class="modal-header">üìú ÎÇ¥ Îã§Ïö¥Î°úÎìú ÎÇ¥Ïó≠</h2>
            <div class="modal-body" id="historyBody"></div>
            <div class="modal-footer"><button class="btn btn-primary" onclick="closeHistoryModal()">Îã´Í∏∞</button></div>
        </div>
    </div>
    <div class="modal" id="chargeModal">
        <div class="modal-content">
            <h2 class="modal-header" style="color:#667eea">üí∞ Í≥ÑÏ¢å Ï∂©Ï†Ñ</h2>
            <div class="modal-body">
                <div class="form-group">
                    <label style="color:var(--text-primary);font-weight:bold">ÏûÖÍ∏à Ïãú ÏÇ¨Ïö©Ìï† Ïù¥Î¶Ñ</label>
                    <input type="text" id="chargeName" placeholder="ÌôçÍ∏∏Îèô" style="width:100%;padding:12px;border:2px solid var(--border-color);border-radius:8px;font-size:1em;background:var(--input-bg);color:var(--text-primary);transition:all 0.3s ease" value="">
                </div>
                <div class="form-group" style="margin-top:15px">
                    <label style="color:var(--text-primary);font-weight:bold">Ï∂©Ï†Ñ Í∏àÏï°(Ïõê)</label>
                    <input type="number" id="chargeAmount" placeholder="10000" min="0" style="width:100%;padding:12px;border:2px solid var(--border-color);border-radius:8px;font-size:1em;background:var(--input-bg);color:var(--text-primary);transition:all 0.3s ease" value="">
                </div>
                <div style="background:#e3f2fd;padding:15px;border-radius:10px;margin-top:20px;border-left:4px solid #667eea">
                    <p style="margin-bottom:10px;font-weight:bold;color:var(--text-primary)">üí≥ ÏûÖÍ∏à Í≥ÑÏ¢å Ï†ïÎ≥¥</p>
                    <p style="margin:0;color:var(--text-secondary)">Íµ≠ÎØºÏùÄÌñâ: 7018-9074-0985-68</p>
                    <p style="margin:5px 0 0 0;font-size:0.9em;color:var(--text-tertiary)">‚ö†Ô∏è ÏûÖÍ∏à Ïãú ÏúÑ Ïù¥Î¶ÑÏúºÎ°ú ÏûÖÍ∏àÌï¥Ï£ºÏÑ∏Ïöî</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeChargeModal()">Ï∑®ÏÜå</button>
                <button class="btn btn-primary" onclick="submitChargeRequest()">Ï∂©Ï†Ñ ÏöîÏ≤≠</button>
            </div>
        </div>
    </div>
    <div class="modal" id="versionModal">
        <div class="modal-content">
            <h2 class="modal-header" style="color:#667eea">üì¶ Î≤ÑÏ†Ñ ÏÑ†ÌÉù</h2>
            <div class="modal-body" id="versionModalBody">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeVersionModal()">Ï∑®ÏÜå</button>
                <button class="btn btn-primary" onclick="confirmVersionDownload()">Îã§Ïö¥Î°úÎìú</button>
            </div>
        </div>
    </div>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

    <script>
// IconaMoon-style inline SVGs (https://github.com/dariushhpg1/IconaMoon)
function getIcon(name){
    const commonAttrs='stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"';
    switch(name){
        case 'search': return `<svg viewBox="0 0 24 24" ${commonAttrs}><circle cx="11" cy="11" r="7"></circle><path d="M21 21l-4.3-4.3"></path></svg>`;
        case 'download': return `<svg viewBox="0 0 24 24" ${commonAttrs}><path d="M12 3v12"></path><path d="M7 10l5 5 5-5"></path><path d="M5 21h14"></path></svg>`;
        case 'cart': return `<svg viewBox="0 0 24 24" ${commonAttrs}><path d="M6 6h15l-1.5 9H7.5L6 6z"></path><circle cx="9" cy="20" r="1"></circle><circle cx="18" cy="20" r="1"></circle><path d="M6 6L5 3H3"></path></svg>`;
        case 'info': return `<svg viewBox="0 0 24 24" ${commonAttrs}><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>`;
        case 'logout': return `<svg viewBox="0 0 24 24" ${commonAttrs}><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><path d="M16 17l5-5-5-5"></path><path d="M21 12H9"></path></svg>`;
        case 'credit-card': return `<svg viewBox="0 0 24 24" ${commonAttrs}><rect x="2" y="5" width="20" height="14" rx="2"></rect><path d="M2 10h20"></path><path d="M6 15h4"></path></svg>`;
        case 'user': return `<svg viewBox="0 0 24 24" ${commonAttrs}><circle cx="12" cy="8" r="4"></circle><path d="M4 20a8 8 0 0 1 16 0"></path></svg>`;
        case 'sun': return `<svg viewBox="0 0 24 24" ${commonAttrs}><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"></path></svg>`;
        case 'moon': return `<svg viewBox="0 0 24 24" ${commonAttrs}><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>`;
        case 'star': return `<svg viewBox="0 0 24 24" ${commonAttrs}><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>`;
        default: return '';
    }
}
function withIcon(iconName,label){return `<span class="icon">${getIcon(iconName)}</span>${label||''}`}
// Firebase Ï¥àÍ∏∞Ìôî
const firebaseConfig = {
  apiKey: "AIzaSyB_FsD_GqnENdMGeuzH5Q8tICxn_fgu7OQ",
  authDomain: "plugmarketdb.firebaseapp.com",
  databaseURL: "https://plugmarketdb-default-rtdb.firebaseio.com",
  projectId: "plugmarketdb",
  storageBucket: "plugmarketdb.firebasestorage.app",
  messagingSenderId: "142551495005",
  appId: "1:142551495005:web:6b2b02b9ea53b4198138b4",
  measurementId: "G-3YMWZPCFWQ"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const database = firebase.database();
async function ensureFirebaseAuth(){
    try{ await firebase.auth().signInAnonymously(); }catch(e){ console.log('Firebase ÏùµÎ™Ö Î°úÍ∑∏Ïù∏ Ïã§Ìå®'); }
}

let plugins={},currentUser=null,currentFilter='all',currentCategory='all',currentSort='popular',selectedRating=0,currentPlugin=null,discordMembers=[],selectedVersion=null,pendingDownloadPlugin=null;
const WEBHOOK='https://discord.com/api/webhooks/1425431420158869584/_H7Fr8vnzydAuqVoQ8Sbm5c2wHlb7EL8XXAIadq1waQGaaPCvJYGjhQotyWU4DHY0-zv';
const CHARGE_WEBHOOK='https://discord.com/api/webhooks/1431904746448621569/lf5VZA1yzetYguDUDCsIJuE0B0K3CQ1TL9Ol-GYDQn5uUGRXQ5XtNGO7FoS6ZVjuwq40';
const DISCORD_CLIENT_ID='1414591036734312499';
const DISCORD_WIDGET_API='https://discord.com/api/guilds/1420030738346152093/widget.json';
const REDIRECT_URI=window.location.origin+window.location.pathname;
const DISCORD_AUTHORIZE_BASE='https://discord.com/api/oauth2/authorize';
async function handleDiscordImplicitCallback(){
    const hash=window.location.hash.startsWith('#')?window.location.hash.substring(1):'';
    if(!hash) return;
    const params=new URLSearchParams(hash);
    const accessToken=params.get('access_token');
    if(!accessToken) return;
    try{
        const userRes=await fetch('https://discord.com/api/users/@me',{headers:{Authorization:`Bearer ${accessToken}`}});
        if(userRes.ok){
            const user=await userRes.json();
            const discordId=user.id||'';
            const discordUsername=user.username||'DiscordUser';
            currentUser={discordId,discordUsername,minecraftId:discordUsername,actualMcName:discordUsername,username:discordUsername,loginTime:new Date().toISOString(),downloads:[],reviews:{}};
            localStorage.setItem('discordId',discordId);
            const allUsers=JSON.parse(localStorage.getItem('allUsers')||'{}');
            if(!allUsers[currentUser.minecraftId]){
                allUsers[currentUser.minecraftId]={minecraftId:currentUser.minecraftId,actualMcName:currentUser.actualMcName,discordId,discordUsername,balance:0,lastLogin:new Date().toISOString()};
            }else{
                allUsers[currentUser.minecraftId].discordId=discordId;
                allUsers[currentUser.minecraftId].discordUsername=discordUsername;
                allUsers[currentUser.minecraftId].lastLogin=new Date().toISOString();
            }
            localStorage.setItem('allUsers',JSON.stringify(allUsers));
            localStorage.setItem('currentUser',JSON.stringify(currentUser));
            verifyDiscordMembership();
            await backfillUserDownloadsToFirebase();
            await setupUserBalanceListener();
            window.history.replaceState({},document.title,window.location.pathname);
            showUserInfo();
            renderPlugins();
        }
    }catch(e){}
}

function startDiscordLogin(){
    const params=new URLSearchParams({client_id:DISCORD_CLIENT_ID,redirect_uri:REDIRECT_URI,response_type:'token',scope:'identify'});
    const url=`${DISCORD_AUTHORIZE_BASE}?${params.toString()}`;
    window.location.href=url;
}

window.openLoginModal=function(){ startDiscordLogin(); };
const ADMIN_DISCORD_ID='787223885766328340';
const MOJANG_API='https://api.mojang.com/users/profiles/minecraft/';
const initialData={p1:{id:'p1',name:"CookingPlugin",description:"ÏöîÎ¶¨ ÏãúÏä§ÌÖú",version:"1.0",type:"free",category:"Í≤åÏûÑÌîåÎ†àÏù¥",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/uqe6g4wu4vwlfh46qd9i4/CookingPlugin.jar?rlkey=nrxb0beuwyjbxqxq8d9w2oei4&st=sv9nvc3q&dl=1"},p2:{id:'p2',name:"ItemsAdder",description:"Ïª§Ïä§ÌÖÄ ÏïÑÏù¥ÌÖú",version:"1.2",type:"free",category:"Ïª§Ïä§ÌÖÄ",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/jnqiumuvlm9ibos0amapv/itemsadder-1.2-paper.jar?rlkey=37p1s990yx23j2c6b4j3sjpv6&st=u3c9s9qf&dl=1"},p3:{id:'p3',name:"QuestPlugin",description:"ÌÄòÏä§Ìä∏ ÏãúÏä§ÌÖú",version:"1.5",type:"free",category:"RPG",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/j7d7lh2skws90d3hqrwa1/QuestPlugin-1.5-paper.jar?rlkey=9h8n0sr4tyem40jb2bemdok6k&st=31siar1m&dl=1"},p4:{id:'p4',name:"RankPlugin",description:"Îì±Í∏â ÏãúÏä§ÌÖú",version:"1.0",type:"free",category:"ÏãúÏä§ÌÖú",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/o3ig4n0gxrlxuz01j1j7r/rankplugin-1.0-paper.jar?rlkey=t699uhu6eck878a6u6y36f8fq&st=i4gpgqga&dl=1"},p5:{id:'p5',name:"RoulettePlugin",description:"Î£∞Î†õ",version:"1.0",type:"free",category:"Í≤åÏûÑÌîåÎ†àÏù¥",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/fsrnzk9u7vet81euq3afr/RoulettePlugin-1.0-paper.jar?rlkey=yi40cimkve8lim2cg4isr8n6k&st=qbfrlmyz&dl=1"},p6:{id:'p6',name:"ShopSystem",description:"ÏÉÅÏ†ê",version:"1.2",type:"free",category:"Í≤ΩÏ†ú",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/ld31twop0v6v454dhhet0/Shopsystem-1.2-paper.jar?rlkey=we1a2xxv5m25lq1wghj0o1ugf&st=068q0ixb&dl=1"},p7:{id:'p7',name:"SkillSystem",description:"Ïä§ÌÇ¨",version:"1.0",type:"free",category:"RPG",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/8hl3xexcd5h19urq7hg9g/.zip?rlkey=zhdpub1gs0q6y3hspdjr6a3py&st=855e7qb7&dl=1"},p8:{id:'p8',name:"SpectatorOnDeath",description:"Í¥ÄÏ†Ñ",version:"1.0",type:"free",category:"Í≤åÏûÑÌîåÎ†àÏù¥",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/xc2fyqs65nuymhhqwzuc3/SpectatorOnDeath-1.0-paper.jar?rlkey=fwmas7lvqek4ej1atni7gwki5&st=sutonbm3&dl=1"},p9:{id:'p9',name:"SwordPlugin",description:"Í≤Ä",version:"1.2",type:"free",category:"Ïª§Ïä§ÌÖÄ",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/seacbjovms352dw3yyga9/sword-1.2-paper.jar?rlkey=5cdesj2v2ax436ze7905fiifp&st=szgdpnve&dl=1"},p10:{id:'p10',name:"PartyPlugin",description:"ÌååÌã∞ ÌîåÎü¨Í∑∏Ïù∏",version:"1.0",type:"paid",price:1000,category:"Í≤åÏûÑÌîåÎ†àÏù¥",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/b95odfznqkzds40o6ieov/party_plugin-1.0-paper.jar?rlkey=h2wquxzpyn2ukltkv08onhhbo&st=4duvaelz&dl=1",versions:{'1.21.8':'https://www.dropbox.com/scl/fi/kf8bu05yhhjyeunm2k651/party_plugin1.21.8-1.0-paper.jar?rlkey=s8n4u6qt58kxsx3k50zveiry0&st=f0ztfn93&dl=1','1.21.9':'https://www.dropbox.com/scl/fi/fgn6b55wifynx0phpjfyk/party_plugin1.21.9-1.0-paper.jar?rlkey=3p9sm1zw26ezdbqfdz3ghgk46&st=x3rsm6n3&dl=1','1.21.10':'https://www.dropbox.com/scl/fi/b72g118ghi65l3ffe49km/party_plugin1.21.10-1.0-paper.jar?rlkey=qkd5651rvmb8fc0c4eovd6p0a&st=r25uzg1x&dl=1'}},p11:{id:'p11',name:"GuildPlugin",description:"Í∏∏Îìú ÌîåÎü¨Í∑∏Ïù∏",version:"1.6",type:"free",category:"ÏãúÏä§ÌÖú",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/9zz1kxzvy8lga803xpcr6/guild_plugin-1.6-paper.jar?rlkey=bbnwl32v2dudy4okcyt6essh3&st=gtm8nyie&dl=1"},p12:{id:'p12',name:"FriendPlugin",description:"ÏπúÍµ¨ ÌîåÎü¨Í∑∏Ïù∏",version:"1.1",type:"free",category:"ÏãúÏä§ÌÖú",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/6tr94vp2peqjns0w0c6ol/firend_plugin-1.1-paper.jar?rlkey=j0vkpwugnhjvla7npy00f9h6e&st=tvmxuubu&dl=1"},p13:{id:'p13',name:"HousingSystem",description:"ÌïòÏö∞Ïßï ÏãúÏä§ÌÖú",version:"1.5",type:"free",category:"Í≤åÏûÑÌîåÎ†àÏù¥",downloads:0,rating:0,reviews:{},downloadUrl:"https://www.dropbox.com/scl/fi/aex1kbkoskc0mqyrm784g/Housing_system-1.5-paper.jar?rlkey=tnj1pnr1pv66g8lhe7a63cng9&st=f4b5ca5m&dl=1"}};

// Firebase Îã§Ïö¥Î°úÎìú Ïπ¥Ïö¥Ìä∏ Î°úÎìú
async function loadDownloadsFromFirebase(){
    try{
        const snapshot = await database.ref('plugins').once('value');
        const firebaseData = snapshot.val();
        if(firebaseData){
            // Firebase Îç∞Ïù¥ÌÑ∞Î°ú Îã§Ïö¥Î°úÎìú Ïπ¥Ïö¥Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
            let shouldSave = false;
            Object.keys(firebaseData).forEach(pluginId => {
                if(plugins[pluginId]){
                    if(firebaseData[pluginId].downloads !== undefined) {
                        plugins[pluginId].downloads = firebaseData[pluginId].downloads || 0;
                    }
                    if(firebaseData[pluginId].price !== undefined) {
                        plugins[pluginId].price = firebaseData[pluginId].price || 0;
                        shouldSave = true;
                    }
                    if(firebaseData[pluginId].type !== undefined) {
                        plugins[pluginId].type = firebaseData[pluginId].type || 'free';
                        shouldSave = true;
                    }
                }
            });
            if(shouldSave) {
                localStorage.setItem('plugins', JSON.stringify(plugins));
            }
            console.log('‚úÖ FirebaseÏóêÏÑú ÌîåÎü¨Í∑∏Ïù∏ Ï†ïÎ≥¥ Î°úÎìú ÏôÑÎ£å');
        }else{
            // FirebaseÏóê Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏúºÎ©¥ Ï¥àÍ∏∞Ìôî
            await initializeFirebaseData();
        }
    }catch(e){
        console.log('‚ÑπÔ∏è Firebase ÏÇ¨Ïö© Î∂àÍ∞Ä - localStorageÎßå ÏÇ¨Ïö©Ìï©ÎãàÎã§');
        // Firebase Í≤ΩÍ≥†Î•º Î¨¥ÏãúÌïòÍ≥† localStorageÎßå ÏÇ¨Ïö©
    }
}

// Firebase Ï¥àÍ∏∞ Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï
async function initializeFirebaseData(){
    try{
        const updates = {};
        Object.keys(plugins).forEach(pluginId => {
            updates[`plugins/${pluginId}`] = {
                name: plugins[pluginId].name,
                downloads: plugins[pluginId].downloads || 0,
                price: plugins[pluginId].price || 0,
                type: plugins[pluginId].type || 'free'
            };
        });
        await database.ref().update(updates);
        console.log('‚úÖ Firebase Ï¥àÍ∏∞ Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï ÏôÑÎ£å');
    }catch(e){
        console.log('‚ÑπÔ∏è Firebase Ï¥àÍ∏∞Ìôî Î∂àÍ∞Ä - localStorageÎßå ÏÇ¨Ïö©');
    }
}

async function ensureFirebasePlugin(pluginId){
    try{
        const p=plugins[pluginId];
        if(!p) return;
        await database.ref(`plugins/${pluginId}`).update({
            name:p.name,
            downloads:p.downloads||0,
            price:p.price||0,
            type:p.type||'free'
        });
    }catch(e){}
}

async function upsertFirebasePlugins(){
    try{
        const updates={};
        Object.keys(plugins).forEach(id=>{
            const p=plugins[id];
            updates[`plugins/${id}`]={name:p.name,downloads:p.downloads||0,price:p.price||0,type:p.type||'free'};
        });
        await database.ref().update(updates);
    }catch(e){}
}

// FirebaseÏóê Îã§Ïö¥Î°úÎìú Ïπ¥Ïö¥Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
async function updateDownloadInFirebase(pluginId){
    try{
        const pluginRef = database.ref(`plugins/${pluginId}/downloads`);
        // Ìä∏ÎûúÏû≠ÏÖòÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ ÏïàÏ†ÑÌïòÍ≤å Ï¶ùÍ∞Ä
        await pluginRef.transaction((currentValue) => {
            return (currentValue || 0) + 1;
        });
        console.log(`‚úÖ Firebase ÏóÖÎç∞Ïù¥Ìä∏: ${pluginId}`);
    }catch(e){
        // Firebase ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå® Ïãú Ï°∞Ïö©Ìûà Î¨¥Ïãú
        console.log('‚ÑπÔ∏è Firebase ÏóÖÎç∞Ïù¥Ìä∏ Î∂àÍ∞Ä');
    }
}

// Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞Ìôî Î¶¨Ïä§ÎÑà ÏÑ§Ï†ï
function setupFirebaseListeners(){
    try{
        database.ref('plugins').on('value', (snapshot) => {
            const firebaseData = snapshot.val();
            if(firebaseData && Object.keys(plugins).length > 0){
                let shouldRender = false;
                Object.keys(firebaseData).forEach(pluginId => {
                    if(plugins[pluginId]){
                        const newDownloads = firebaseData[pluginId].downloads;
                        const newPrice = firebaseData[pluginId].price;
                        const newType = firebaseData[pluginId].type;
                        
                        // Í∞íÏù¥ Î≥ÄÍ≤ΩÎêú Í≤ΩÏö∞ÏóêÎßå ÏóÖÎç∞Ïù¥Ìä∏
                        if(plugins[pluginId].downloads !== newDownloads){
                            plugins[pluginId].downloads = newDownloads || 0;
                            shouldRender = true;
                        }
                        if(plugins[pluginId].price !== newPrice && newPrice !== undefined){
                            plugins[pluginId].price = newPrice;
                            shouldRender = true;
                        }
                        if(plugins[pluginId].type !== newType && newType !== undefined){
                            plugins[pluginId].type = newType;
                            shouldRender = true;
                        }
                    }
                });
                
                // Î≥ÄÍ≤ΩÏÇ¨Ìï≠Ïù¥ ÏûàÏóàÍ≥† Ï†ÄÏû•Îêú ÌîåÎü¨Í∑∏Ïù∏ Îç∞Ïù¥ÌÑ∞ÎèÑ ÏóÖÎç∞Ïù¥Ìä∏
                if(shouldRender){
                    saveLocal();
                    if(currentUser){
                        renderPlugins();
                        console.log('‚úÖ FirebaseÏóêÏÑú ÌîåÎü¨Í∑∏Ïù∏ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å');
                    }
                }
            }
        });
    }catch(e){
        console.log('‚ÑπÔ∏è Firebase Î¶¨Ïä§ÎÑà ÏÑ§Ï†ï Î∂àÍ∞Ä');
    }
}

async function loadDiscordMembers(){try{const res=await fetch(DISCORD_WIDGET_API);const data=await res.json();if(data.members){discordMembers=data.members.map(m=>({id:m.id,username:m.username,discriminator:m.discriminator}));console.log('Discord Î©§Î≤Ñ Î°úÎìú:',discordMembers.length+'Î™Ö')}}catch(e){console.error('Discord API Ïã§Ìå®:',e)}}
function loadLocal(){
    const s=localStorage.getItem('plugins');
    if(s){
        try{
            plugins=JSON.parse(s);
            // party_plugin Ìï≠ÏÉÅ ÏµúÏã† ÎßÅÌÅ¨Î°ú ÏóÖÎç∞Ïù¥Ìä∏
            plugins.p10 = {
                id: 'p10',
                name: 'PartyPlugin',
                description: 'ÌååÌã∞ ÌîåÎü¨Í∑∏Ïù∏',
                version: '1.0',
                type: 'paid',
                price: 1000,
                category: 'Í≤åÏûÑÌîåÎ†àÏù¥',
                downloads: plugins.p10?.downloads || 0,
                rating: plugins.p10?.rating || 0,
                reviews: plugins.p10?.reviews || {},
                downloadUrl: 'https://www.dropbox.com/scl/fi/b95odfznqkzds40o6ieov/party_plugin-1.0-paper.jar?rlkey=h2wquxzpyn2ukltkv08onhhbo&st=4duvaelz&dl=1',
                versions: {
                  '1.21.8': 'https://www.dropbox.com/scl/fi/kf8bu05yhhjyeunm2k651/party_plugin1.21.8-1.0-paper.jar?rlkey=s8n4u6qt58kxsx3k50zveiry0&st=x054l1d9&dl=1',
                  '1.21.9': 'https://www.dropbox.com/scl/fi/fgn6b55wifynx0phpjfyk/party_plugin1.21.9-1.0-paper.jar?rlkey=3p9sm1zw26ezdbqfdz3ghgk46&st=e72rdwlw&dl=1',
                  '1.21.10': 'https://www.dropbox.com/scl/fi/b72g118ghi65l3ffe49km/party_plugin1.21.10-1.0-paper.jar?rlkey=qkd5651rvmb8fc0c4eovd6p0a&st=3ezok3i1&dl=1'
                }
            };
            saveLocal();
            // party_plugin Ï°¥Ïû¨ Í≤ÄÏÇ¨ Î∞è Î≥¥Ï†ï
            if(!plugins.p10){
                plugins.p10={
                    id:'p10',
                    name:"PartyPlugin",
                    description:"ÌååÌã∞ ÌîåÎü¨Í∑∏Ïù∏",
                    version:"1.0",
                    type:"paid",
                    price:1000,
                    category:"Í≤åÏûÑÌîåÎ†àÏù¥",
                    downloads:0,
                    rating:0,
                    reviews:{},
                    downloadUrl:"https://www.dropbox.com/scl/fi/b95odfznqkzds40o6ieov/party_plugin-1.0-paper.jar?rlkey=h2wquxzpyn2ukltkv08onhhbo&st=4duvaelz&dl=1",
                    versions:{'1.21.8':'https://www.dropbox.com/scl/fi/kf8bu05yhhjyeunm2k651/party_plugin1.21.8-1.0-paper.jar?rlkey=s8n4u6qt58kxsx3k50zveiry0&st=f0ztfn93&dl=1','1.21.9':'https://www.dropbox.com/scl/fi/fgn6b55wifynx0phpjfyk/party_plugin1.21.9-1.0-paper.jar?rlkey=3p9sm1zw26ezdbqfdz3ghgk46&st=x3rsm6n3&dl=1','1.21.10':'https://www.dropbox.com/scl/fi/b72g118ghi65l3ffe49km/party_plugin1.21.10-1.0-paper.jar?rlkey=qkd5651rvmb8fc0c4eovd6p0a&st=r25uzg1x&dl=1'}
                };
                saveLocal();
                console.log('‚úÖ PartyPlugin added');
            } else {
                // Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞Ïóê Í∞ÄÍ≤© ÏóÜÍ±∞ÎÇò 0Ïù¥Î©¥ Í∏∞Î≥∏ Í∞ÄÍ≤© Ï†ÅÏö©
                if((plugins.p10.price||0)===0){
                    plugins.p10.price=1000;
                    plugins.p10.type='paid';
                    saveLocal();
                    console.log('‚úÖ PartyPlugin price updated to 1000');
                }
            }
            // Ensure GuildPlugin exists
            if(!plugins.p11){
                plugins.p11={
                    id:'p11',
                    name:"GuildPlugin",
                    description:"Í∏∏Îìú ÌîåÎü¨Í∑∏Ïù∏",
                    version:"1.6",
                    type:"free",
                    category:"ÏãúÏä§ÌÖú",
                    downloads:0,
                    rating:0,
                    reviews:{},
                    downloadUrl:"https://www.dropbox.com/scl/fi/9zz1kxzvy8lga803xpcr6/guild_plugin-1.6-paper.jar?rlkey=bbnwl32v2dudy4okcyt6essh3&st=gtm8nyie&dl=1"
                };
                saveLocal();
                console.log('‚úÖ GuildPlugin added');
            } else {
                plugins.p11.downloadUrl="https://www.dropbox.com/scl/fi/9zz1kxzvy8lga803xpcr6/guild_plugin-1.6-paper.jar?rlkey=bbnwl32v2dudy4okcyt6essh3&st=gtm8nyie&dl=1";
                plugins.p11.version='1.6';
                saveLocal();
            }
            // Ensure FriendPlugin exists
            if(!plugins.p12){
                plugins.p12={
                    id:'p12',
                    name:"FriendPlugin",
                    description:"ÏπúÍµ¨ ÌîåÎü¨Í∑∏Ïù∏",
                    version:"1.1",
                    type:"free",
                    category:"ÏãúÏä§ÌÖú",
                    downloads:0,
                    rating:0,
                    reviews:{},
                    downloadUrl:"https://www.dropbox.com/scl/fi/6tr94vp2peqjns0w0c6ol/firend_plugin-1.1-paper.jar?rlkey=j0vkpwugnhjvla7npy00f9h6e&st=tvmxuubu&dl=1"
                };
                saveLocal();
                console.log('‚úÖ FriendPlugin added');
            }
            if(!plugins.p13){
                plugins.p13={
                    id:'p13',
                    name:'HousingSystem',
                    description:'ÌïòÏö∞Ïßï ÏãúÏä§ÌÖú',
                    version:'1.5',
                    type:'free',
                    category:'Í≤åÏûÑÌîåÎ†àÏù¥',
                    downloads:0,
                    rating:0,
                    reviews:{},
                    downloadUrl:'https://www.dropbox.com/scl/fi/aex1kbkoskc0mqyrm784g/Housing_system-1.5-paper.jar?rlkey=tnj1pnr1pv66g8lhe7a63cng9&st=q034n5pn&dl=1'
                };
                saveLocal();
                console.log('‚úÖ HousingSystem added');
            }else{
                plugins.p13.downloadUrl='https://www.dropbox.com/scl/fi/aex1kbkoskc0mqyrm784g/Housing_system-1.5-paper.jar?rlkey=tnj1pnr1pv66g8lhe7a63cng9&st=q034n5pn&dl=1';
                saveLocal();
            }
            console.log('‚úÖ Loaded plugins from localStorage:', Object.keys(plugins).length);
        }catch(e){
            console.error('Error parsing localStorage:', e);
            plugins={...initialData};
            // Add GuildPlugin on fresh init too
            plugins.p11={
                id:'p11',
                name:"GuildPlugin",
                description:"Í∏∏Îìú ÌîåÎü¨Í∑∏Ïù∏",
                version:"1.6",
                type:"free",
                category:"ÏãúÏä§ÌÖú",
                downloads:0,
                rating:0,
                reviews:{},
                downloadUrl:"https://www.dropbox.com/scl/fi/9zz1kxzvy8lga803xpcr6/guild_plugin-1.6-paper.jar?rlkey=bbnwl32v2dudy4okcyt6essh3&st=gtm8nyie&dl=1"
            };
            // Add FriendPlugin on fresh init
            plugins.p12={
                id:'p12',
                name:"FriendPlugin",
                description:"ÏπúÍµ¨ ÌîåÎü¨Í∑∏Ïù∏",
                version:"1.1",
                type:"free",
                category:"ÏãúÏä§ÌÖú",
                downloads:0,
                rating:0,
                reviews:{},
                downloadUrl:"https://www.dropbox.com/scl/fi/6tr94vp2peqjns0w0c6ol/firend_plugin-1.1-paper.jar?rlkey=j0vkpwugnhjvla7npy00f9h6e&st=tvmxuubu&dl=1"
            };
            plugins.p13={
                id:'p13',
                name:'HousingSystem',
                description:'ÌïòÏö∞Ïßï ÏãúÏä§ÌÖú',
                version:'1.5',
                type:'free',
                category:'Í≤åÏûÑÌîåÎ†àÏù¥',
                downloads:0,
                rating:0,
                reviews:{},
                downloadUrl:'https://www.dropbox.com/scl/fi/aex1kbkoskc0mqyrm784g/Housing_system-1.5-paper.jar?rlkey=tnj1pnr1pv66g8lhe7a63cng9&st=q034n5pn&dl=1'
            };
            saveLocal();
        }
    }else{
        plugins={...initialData};
        // Add GuildPlugin on first-time init
        plugins.p11={
            id:'p11',
            name:"GuildPlugin",
            description:"Í∏∏Îìú ÌîåÎü¨Í∑∏Ïù∏",
            version:"1.6",
            type:"free",
            category:"ÏãúÏä§ÌÖú",
            downloads:0,
            rating:0,
            reviews:{},
            downloadUrl:"https://www.dropbox.com/scl/fi/9zz1kxzvy8lga803xpcr6/guild_plugin-1.6-paper.jar?rlkey=bbnwl32v2dudy4okcyt6essh3&st=gtm8nyie&dl=1"
        };
        // Add FriendPlugin on first-time init
        plugins.p12={
            id:'p12',
            name:"FriendPlugin",
            description:"ÏπúÍµ¨ ÌîåÎü¨Í∑∏Ïù∏",
            version:"1.1",
            type:"free",
            category:"ÏãúÏä§ÌÖú",
            downloads:0,
            rating:0,
            reviews:{},
            downloadUrl:"https://www.dropbox.com/scl/fi/6tr94vp2peqjns0w0c6ol/firend_plugin-1.1-paper.jar?rlkey=j0vkpwugnhjvla7npy00f9h6e&st=tvmxuubu&dl=1"
        };
        plugins.p13={
            id:'p13',
            name:'HousingSystem',
            description:'ÌïòÏö∞Ïßï ÏãúÏä§ÌÖú',
            version:'1.5',
            type:'free',
            category:'Í≤åÏûÑÌîåÎ†àÏù¥',
            downloads:0,
            rating:0,
            reviews:{},
            downloadUrl:'https://www.dropbox.com/scl/fi/aex1kbkoskc0mqyrm784g/Housing_system-1.5-paper.jar?rlkey=tnj1pnr1pv66g8lhe7a63cng9&st=q034n5pn&dl=1'
        };
        saveLocal();
        console.log('‚úÖ Initialized plugins with default data');
    }
}

function verifyDiscordMembership(){
    if(!currentUser||!currentUser.discordId||!Array.isArray(discordMembers)) return;
    const ok=discordMembers.some(m=>m.id===currentUser.discordId);
    currentUser.verified=!!ok;
    localStorage.setItem('currentUser',JSON.stringify(currentUser));
}

async function setupUserDownloadsListener(){
    if(!currentUser||!currentUser.minecraftId) return;
    try{
        database.ref(`users/${currentUser.minecraftId}/downloads`).on('value',(snapshot)=>{
            const val=snapshot.val()||{};
            const list=Array.isArray(val)?val:Object.values(val);
            currentUser.downloads=list;
            localStorage.setItem('currentUser',JSON.stringify(currentUser));
            updateUserStats();
        });
    }catch(e){}
}

async function backfillUserDownloadsToFirebase(){
    if(!currentUser||!currentUser.minecraftId) return;
    try{
        const snap=await database.ref(`users/${currentUser.minecraftId}/downloads`).once('value');
        const remote=snap.val()||{};
        const remoteKeys=new Set(Array.isArray(remote)?(remote.map(r=>r&&r.pluginId)):Object.keys(remote));
        const localList=Array.isArray(currentUser.downloads)?currentUser.downloads:[];
        const updates={};
        localList.forEach(rec=>{if(rec&&rec.pluginId&&!remoteKeys.has(rec.pluginId))updates[rec.pluginId]=rec;});
        if(Object.keys(updates).length>0){await database.ref(`users/${currentUser.minecraftId}/downloads`).update(updates);}    
    }catch(e){}
}
function saveLocal(){localStorage.setItem('plugins',JSON.stringify(plugins))}
async function sendDiscord(msg){try{await fetch(WEBHOOK,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({embeds:[{title:"üì• ÏïåÎ¶º",description:msg,color:6750054,timestamp:new Date().toISOString()}]})})}catch(e){}}

function requestCharge(){
    if(!currentUser){
        alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
        return;
    }
    
    // ÎßàÏù∏ÌÅ¨ÎûòÌîÑÌä∏ ÎãâÎÑ§ÏûÑÏùÑ Í∏∞Î≥∏Í∞íÏúºÎ°ú ÏÑ§Ï†ï
    const mcName = currentUser.actualMcName || currentUser.username || '';
    document.getElementById('chargeName').value = mcName;
    document.getElementById('chargeAmount').value = '';
    document.getElementById('chargeModal').classList.add('active');
}

function closeChargeModal(){
    document.getElementById('chargeModal').classList.remove('active');
}

async function submitChargeRequest(){
    const name = document.getElementById('chargeName').value.trim();
    const amount = document.getElementById('chargeAmount').value.trim();
    
    if(!name){
        alert('ÏûÖÍ∏à Ïãú ÏÇ¨Ïö©Ìï† Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
        return;
    }
    
    if(!amount || parseInt(amount) <= 0){
        alert('Ï∂©Ï†Ñ Í∏àÏï°ÏùÑ Ïò¨Î∞îÎ•¥Í≤å ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
        return;
    }
    
    const mcName = currentUser.actualMcName || currentUser.username || 'Unknown';
    
    try{
        const response = await fetch(CHARGE_WEBHOOK,{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify({
                embeds:[{
                    title:"üí∞ Ï∂©Ï†Ñ ÏöîÏ≤≠",
                    description:`**ÎßàÏù∏ÌÅ¨ÎûòÌîÑÌä∏ ÎãâÎÑ§ÏûÑ:** ${mcName}\n**ÏûÖÍ∏à Ïù¥Î¶Ñ:** ${name}\n**Ï∂©Ï†Ñ Í∏àÏï°:** ${parseInt(amount).toLocaleString()}Ïõê\n**ÏöîÏ≤≠ ÏãúÍ∞Ñ:** ${new Date().toLocaleString('ko-KR')}\n\nüí≥ **ÏûÖÍ∏à Í≥ÑÏ¢å**\nÍµ≠ÎØºÏùÄÌñâ: 7018-9074-0985-68`,
                    color:3447003,
                    timestamp:new Date().toISOString()
                }]
            })
        });
        
        if(response.ok){
            alert('‚úÖ Ï∂©Ï†Ñ ÏöîÏ≤≠Ïù¥ Ï†ÑÏÜ°ÎêòÏóàÏäµÎãàÎã§!\n\nüí≥ ÏûÖÍ∏à ÌõÑ Í¥ÄÎ¶¨ÏûêÍ∞Ä ÏûîÏï°ÏùÑ Ï∂©Ï†ÑÌï¥ÎìúÎ¶ΩÎãàÎã§.');
            closeChargeModal();
        }else{
            alert('‚ùå ÏöîÏ≤≠ Ï†ÑÏÜ°Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');
        }
    }catch(e){
        console.error('Ï∂©Ï†Ñ ÏöîÏ≤≠ Ïã§Ìå®:', e);
        alert('‚ùå ÏöîÏ≤≠ Ï†ÑÏÜ°Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
    }
}

async function init(){
    loadLocal();
    loadDiscordMembers();
    setupListeners();
    
    // OAuth ÏΩúÎ∞± Ï≤òÎ¶¨ (Discord implicit, Í∏∞Ï°¥ code Ï≤òÎ¶¨ Î≥ëÌñâ)
    await handleDiscordImplicitCallback();
    handleOAuthCallback();
    
    // FirebaseÏóêÏÑú Îã§Ïö¥Î°úÎìú Ïπ¥Ïö¥Ìä∏ Î°úÎìú Î∞è Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞Ìôî ÏãúÏûë
    await loadDownloadsFromFirebase();
    setupFirebaseListeners();
    await upsertFirebasePlugins();
    
    // currentUserÍ∞Ä ÏûàÏúºÎ©¥ (OAuth ÏΩúÎ∞±ÏóêÏÑú ÏÑ§Ï†ïÎêòÍ±∞ÎÇò localStorageÏóê Ï†ÄÏû•Îêú Í≤ΩÏö∞)
    if(currentUser && currentUser.minecraftId){
        setupUserBalanceListener();
        setupUserDownloadsListener();
        await backfillUserDownloadsToFirebase();
        updateUserBalance();
        verifyDiscordMembership();
        showUserInfo();
        renderPlugins();
    }else{
        // localStorageÏóê Ï†ÄÏû•Îêú ÏÇ¨Ïö©ÏûêÍ∞Ä ÏûàÏúºÎ©¥ Î°úÎìú
        const u=localStorage.getItem('currentUser');
        if(u){
            try {
                currentUser=JSON.parse(u);
                console.log('‚úÖ Í∏∞Ï°¥ ÏÇ¨Ïö©Ïûê Î°úÎìú:', currentUser.minecraftId);
                setupUserBalanceListener();
                setupUserDownloadsListener();
                await backfillUserDownloadsToFirebase();
                updateUserBalance();
                verifyDiscordMembership();
                showUserInfo();
                renderPlugins();
            } catch(e) {
                console.error('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Î°úÎìú Ïã§Ìå®:', e);
                // Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÜêÏÉÅÎêòÏóàÏúºÎ©¥ ÏÇ≠Ï†úÌïòÍ≥† Ïû¨Î°úÍ∑∏Ïù∏
                localStorage.removeItem('currentUser');
                window.location.href='login.html';
            }
        }else{
            console.log('‚ùå Î°úÍ∑∏Ïù∏ ÌïÑÏöî');
            const btnLogin=document.getElementById('btnLogin');
            if(btnLogin) btnLogin.style.display='inline-block';
            const btnLogout=document.getElementById('btnLogout');
            if(btnLogout) btnLogout.style.display='none';
            renderPlugins();
        }
    }
}

async function handleOAuthCallback(){
    const params=new URLSearchParams(window.location.search);
    const code=params.get('code');
    if(code){
        const state=params.get('state');
        let minecraftId = 'Player' + Math.floor(Math.random() * 9999);
        let discordId = localStorage.getItem('discordId') || '';
        let discordUsername = '';
        
        // StateÏóêÏÑú Îç∞Ïù¥ÌÑ∞ ÌååÏã±
        if(state) {
            try {
                const stateData = JSON.parse(decodeURIComponent(state));
                minecraftId = stateData.minecraftId || minecraftId;
            } catch(e) {
                minecraftId = decodeURIComponent(state);
            }
        }
        
        console.log('‚úÖ Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥:', {minecraftId, discordId});
        
        // Minecraft Ïã§Ï†ú ÎãâÎÑ§ÏûÑ Í∞ÄÏ†∏Ïò§Í∏∞
        let actualMcName = minecraftId;
        try {
            const mcResponse = await fetch(MOJANG_API + minecraftId);
            if(mcResponse.ok) {
                const mcData = await mcResponse.json();
                actualMcName = mcData.name;
            }
        } catch(e) {
            console.log('Minecraft API Ìò∏Ï∂ú Ïã§Ìå®, ÏûÖÎ†•Í∞í ÏÇ¨Ïö©');
        }
        
        currentUser={
            discordCode:code,
            discordId:discordId,
            discordUsername:discordUsername,
            minecraftId:minecraftId,
            actualMcName:actualMcName,
            username:actualMcName,
            loginTime:new Date().toISOString(),
            downloads:[],
            reviews:{}
        };
        
        // Discord IDÍ∞Ä ÏóÜÏúºÎ©¥ Ï†ÄÏû• (ÏûàÏúºÎ©¥ Ïù¥ÎØ∏ Ï†ÄÏû•ÎêòÏñ¥ ÏûàÏùå)
        if(!localStorage.getItem('discordId') && discordId) {
            localStorage.setItem('discordId', discordId);
        }
        
        // Ïú†Ï†Ä Ï†ïÎ≥¥Î•º Ï†ÑÏ≤¥ Ïú†Ï†Ä Î™©Î°ùÏóê Ï†ÄÏû•
        const allUsers = JSON.parse(localStorage.getItem('allUsers') || '{}');
        if(!allUsers[minecraftId]) {
            allUsers[minecraftId] = {
                minecraftId: minecraftId,
                actualMcName: actualMcName,
                discordId: discordId,
                discordUsername: discordUsername,
                balance: 0,
                lastLogin: new Date().toISOString()
            };
        } else {
            allUsers[minecraftId].lastLogin = new Date().toISOString();
            allUsers[minecraftId].actualMcName = actualMcName;
            allUsers[minecraftId].discordId = discordId; // Discord ID ÏóÖÎç∞Ïù¥Ìä∏
        }
        localStorage.setItem('allUsers', JSON.stringify(allUsers));
        
        // currentUser Ï†ÄÏû• - Îã§Ïùå Î≤àÏóê ÏûêÎèô Î°úÍ∑∏Ïù∏
        localStorage.setItem('currentUser',JSON.stringify(currentUser));
        
        // URLÏóêÏÑú code Ï†úÍ±∞
        window.history.replaceState({},document.title,window.location.pathname);
        
        await setupUserBalanceListener();
        showUserInfo();
        renderPlugins();
        
        console.log('‚úÖ Î°úÍ∑∏Ïù∏ ÏôÑÎ£å:', currentUser);
        
        // ÏùºÎ∞ò ÏÇ¨Ïö©ÏûêÎßå Î°úÍ∑∏ ÎÇ®Í∏∞Í∏∞ (Í¥ÄÎ¶¨ÏûêÎäî Î°úÍ∑∏ Ï†úÏô∏)
        if(discordId !== ADMIN_DISCORD_ID && discordId) {
            sendDiscord(`**‚úÖ Î°úÍ∑∏Ïù∏**\n**ÎßàÏù∏ÌÅ¨ÎûòÌîÑÌä∏:** ${actualMcName}\n**ÏãúÍ∞Ñ:** ${new Date().toLocaleString('ko-KR')}`);
        }
    }
}

function showUserInfo(){
    const displayName = currentUser.actualMcName || currentUser.username || 'User';
    document.getElementById('userName').textContent=displayName+'Îãò';
    const dc=currentUser.discordId?(' ¬∑ DC: '+currentUser.discordId+(currentUser.verified?' Ïù∏Ï¶ùÎê®':'')) : '';
    document.getElementById('userIdDisplay').textContent='MC: '+displayName+dc;
    updateUserStats();
    updateUserBalance();
    
    // Í¥ÄÎ¶¨Ïûê Î≤ÑÌäº Ï∂îÍ∞Ä (Í¥ÄÎ¶¨ÏûêÏù∏ Í≤ΩÏö∞)
    const isAdmin = checkAdmin();
    const menuAdmin=document.getElementById('menuAdmin');
    if(menuAdmin){ menuAdmin.style.display = isAdmin ? 'block' : 'none'; }
    // Ìó§Îçî Î≤ÑÌäº ÏïÑÏù¥ÏΩò Ï†ÅÏö©
    const btnCharge=document.getElementById('btnCharge');
    const btnMyPage=document.getElementById('btnMyPage');
    const btnLogout=document.getElementById('btnLogout');
    const btnLogin=document.getElementById('btnLogin');
    if(btnCharge) btnCharge.innerHTML=withIcon('credit-card','Ï∂©Ï†Ñ ÏöîÏ≤≠');
    if(btnMyPage) btnMyPage.innerHTML=withIcon('user','ÎßàÏù¥ÌéòÏù¥ÏßÄ');
    if(btnLogout) btnLogout.innerHTML=withIcon('logout','Î°úÍ∑∏ÏïÑÏõÉ');
    if(btnLogin) btnLogin.style.display='none';
    const dd=document.getElementById('menuDropdown');
    if(dd) dd.classList.remove('show');
}

function updateUserBalance(){
    if(!currentUser) return;
    const allUsers = JSON.parse(localStorage.getItem('allUsers') || '{}');
    const userBalance = allUsers[currentUser.minecraftId]?.balance || 0;
    const balanceElement = document.getElementById('userBalance');
    if(balanceElement) {
        balanceElement.textContent = userBalance.toLocaleString();
    }
    
}

function checkAdmin(){
    // Discord IDÎ°ú Í¥ÄÎ¶¨Ïûê Ï≤¥ÌÅ¨ (ÌòÑÏû¨Îäî Í∞ÑÎã®Ìïú Íµ¨ÌòÑ)
    // Ïã§Ï†úÎ°úÎäî Discord APIÎ°ú ÌôïÏù∏Ìï¥Ïïº Ìï®
    return currentUser && currentUser.discordId === ADMIN_DISCORD_ID;
}

function setupListeners(){
    document.querySelectorAll('.category-tag').forEach(t=>t.addEventListener('click',function(){document.querySelectorAll('.category-tag').forEach(x=>x.classList.remove('active'));this.classList.add('active');currentCategory=this.dataset.category;renderPlugins()}));
    document.querySelectorAll('.filter-btn').forEach(b=>b.addEventListener('click',function(){document.querySelectorAll('.filter-btn').forEach(x=>x.classList.remove('active'));this.classList.add('active');currentFilter=this.dataset.filter;renderPlugins()}));
    document.getElementById('sortSelect').addEventListener('change',function(){currentSort=this.value;renderPlugins()});
    document.getElementById('searchInput').addEventListener('keypress',function(e){if(e.key==='Enter')searchPlugins()});
    document.querySelectorAll('#starRating .star').forEach(s=>s.addEventListener('click',function(){selectedRating=parseInt(this.dataset.rating);document.querySelectorAll('#starRating .star').forEach((x,i)=>{if(i<selectedRating)x.classList.add('active');else x.classList.remove('active')})}));
}

function toggleUserActions(){
    const ua=document.getElementById('userActions');
    if(ua){ ua.classList.toggle('show'); }
}

function toggleMenuDropdown(){
    const dd=document.getElementById('menuDropdown');
    if(dd){ dd.classList.toggle('show'); }
}
function gotoMyPage(){ window.location.href='MyAccount.html'; }
function openAdmin(){ window.location.href='admin.html'; }

async function setupUserBalanceListener(){
    if(!currentUser) return;
    try{
        database.ref(`users/${currentUser.minecraftId}/balance`).on('value',(snapshot)=>{
            const balance=snapshot.val()||0;
            const allUsers=JSON.parse(localStorage.getItem('allUsers')||'{}');
            if(!allUsers[currentUser.minecraftId]) allUsers[currentUser.minecraftId]={minecraftId:currentUser.minecraftId,balance:0};
            allUsers[currentUser.minecraftId].balance=balance;
            localStorage.setItem('allUsers',JSON.stringify(allUsers));
            updateUserBalance();
        });
    }catch(e){}
}

function setupPluginCardListeners(){
    document.querySelectorAll('.btn[data-action="download"]').forEach(btn=>{
        btn.addEventListener('click',function(e){
            e.preventDefault();
            e.stopPropagation();
            const pluginId=this.dataset.pluginId;
            downloadPlugin(pluginId);
        });
    });
    document.querySelectorAll('.btn[data-action="redownload"]').forEach(btn=>{
        btn.addEventListener('click',function(e){
            e.preventDefault();
            e.stopPropagation();
            const pluginId=this.dataset.pluginId;
            redownloadPlugin(pluginId);
        });
    });
    document.querySelectorAll('.btn[data-action="login"]').forEach(btn=>{
        btn.addEventListener('click',function(e){
            e.preventDefault();
            e.stopPropagation();
            openLoginModal();
        });
    });
    document.querySelectorAll('.btn[data-action="detail"]').forEach(btn=>{
        btn.addEventListener('click',function(e){
            e.preventDefault();
            e.stopPropagation();
            const pluginId=this.dataset.pluginId;
            showDetail(pluginId);
        });
    });
}

window.logout=function(){
    if(confirm('Î°úÍ∑∏ÏïÑÏõÉ ÌïòÏãúÍ≤†ÏäµÎãàÍπå?')){
        currentUser=null;
        localStorage.removeItem('currentUser');
        document.getElementById('userName').textContent='Î°úÍ∑∏Ïù∏ ÌïÑÏöî';
        document.getElementById('userIdDisplay').textContent='';
        const btnLogin=document.getElementById('btnLogin');
        if(btnLogin) btnLogin.style.display='inline-block';
        const btnLogout=document.getElementById('btnLogout');
        if(btnLogout) btnLogout.style.display='none';
        const dd=document.getElementById('menuDropdown');
        if(dd) dd.classList.remove('show');
        renderPlugins();
    }
};

function updateUserStats(){
    if(!currentUser)return;
    const d=currentUser.downloads?currentUser.downloads.length:0;
    const r=currentUser.reviews?Object.values(currentUser.reviews):[];
    const a=r.length>0?(r.reduce((s,x)=>s+x.rating,0)/r.length).toFixed(1):'0.0';
    document.getElementById('downloadCount').textContent=d;
    document.getElementById('avgRating').textContent=a;
}

function renderPlugins(){
    const g=document.getElementById('pluginsGrid');
    if(!g) return;
    let l=Object.values(plugins);
    if(!l || l.length === 0){
        console.log('No plugins to render');
        return;
    }
    if(currentCategory!=='all')l=l.filter(p=>p.category===currentCategory);
    if(currentFilter==='free')l=l.filter(p=>p.type==='free');
    else if(currentFilter==='premium')l=l.filter(p=>p.type==='paid'&&(p.price||0)>0);
    else if(currentFilter==='downloaded'&&currentUser)l=l.filter(p=>currentUser.downloads&&currentUser.downloads.some(d=>d.pluginId===p.id));
    const t=document.getElementById('searchInput').value.toLowerCase();
    if(t)l=l.filter(p=>p.name.toLowerCase().includes(t));
    l.sort((a,b)=>{if(currentSort==='rating')return(b.rating||0)-(a.rating||0);if(currentSort==='downloads')return b.downloads-a.downloads;return(b.downloads*(b.rating||0))-(a.downloads*(a.rating||0))});
    g.innerHTML=l.map(p=>{
        const i=currentUser&&currentUser.downloads&&currentUser.downloads.some(d=>d.pluginId===p.id);
        const c=p.reviews?Object.keys(p.reviews).length:0;
        const s='‚òÖ'.repeat(Math.round(p.rating||0))+'‚òÜ'.repeat(5-Math.round(p.rating||0));
        const isFree=p.type==='free'||(p.price||0)===0;
        const badgeText=isFree?'Î¨¥Î£å':`${(p.price||0).toLocaleString()}Ïõê`;
        const badgeColor=isFree?'#10b981':'#f59e0b';
        const versionInfo = (p.versions && Object.keys(p.versions).length > 0) ? `<p class="plugin-version">v${p.version} ‚Ä¢ ${Object.keys(p.versions).length}Í∞ú ÎßàÏù∏ÌÅ¨ÎûòÌîÑÌä∏ Î≤ÑÏ†Ñ ÏßÄÏõê</p>` : `<p class="plugin-version">v${p.version}</p>`;
        const isLoggedIn=!!currentUser;
        const primaryLabel=!isLoggedIn?'Î°úÍ∑∏Ïù∏':(i?'Ïû¨Îã§Ïö¥':(isFree?'Îã§Ïö¥Î°úÎìú':'Íµ¨Îß§'));
        const primaryIcon=!isLoggedIn?'user':'download';
        const primaryAction=!isLoggedIn?'login':(i?'redownload':'download');
        return`<div class="plugin-card"><div style="display:flex;justify-content:space-between"><div><h3 class="plugin-title">${p.name}</h3><span class="plugin-category">${p.category}</span></div><span class="plugin-badge" style="background:${badgeColor}">${badgeText}</span></div><p class="plugin-description">${p.description}</p>${versionInfo}<div class="plugin-rating"><span class="stars">${s}</span><span class="rating-count">${(p.rating||0).toFixed(1)}(${c})</span></div><p class="plugin-downloads">${withIcon('download',`${p.downloads}Ìöå`)}</p>${i?'<div style="background:#10b981;color:white;padding:8px;border-radius:8px;text-align:center;margin:10px 0">‚úì Îã§Ïö¥Î°úÎìú ÏôÑÎ£å</div>':''}<div class="plugin-footer"><button class="btn btn-primary" data-plugin-id="${p.id}" data-action="${primaryAction}">${withIcon(primaryIcon,primaryLabel)}</button><button class="btn btn-secondary" data-plugin-id="${p.id}" data-action="detail">${withIcon('info','ÏÉÅÏÑ∏Î≥¥Í∏∞')}</button></div></div>`
    }).join('');
    setupPluginCardListeners();
}

window.searchPlugins=function(){renderPlugins()};

window.showDetail=function(pid){
    currentPlugin=plugins[pid];
    if(!currentPlugin)return;
    const i=currentUser&&currentUser.downloads&&currentUser.downloads.some(d=>d.pluginId===pid);
    const u=currentUser&&currentUser.reviews&&currentUser.reviews[pid];
    document.getElementById('modalTitle').textContent=currentPlugin.name;
    
    // Î¶¨Î∑∞ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
    let r=currentPlugin.reviews||{};
    if(!r || typeof r !== 'object'){
        r={};
    }
    
    const rKeys=Object.keys(r);
    console.log('Î¶¨Î∑∞ Îç∞Ïù¥ÌÑ∞:', r, 'ÌÇ§ Í∞úÏàò:', rKeys.length);
    
    let h='<div class="reviews-section"><h3>üìù Î¶¨Î∑∞('+rKeys.length+')</h3>';
    if(rKeys.length===0){
        h+='<p style="text-align:center;color:var(--text-tertiary);padding:20px">ÏïÑÏßÅ Î¶¨Î∑∞Í∞Ä ÏóÜÏäµÎãàÎã§</p>';
    }else{
        rKeys.forEach(key=>{
            const x=r[key];
            if(!x)return;
            
            const isMyReview=currentUser&&key===currentUser.minecraftId;
            const s='‚òÖ'.repeat(Math.floor(x.rating||0))+'‚òÜ'.repeat(5-Math.floor(x.rating||0));
            const deleteBtn=isMyReview?`<button onclick="deleteReview('${pid}','${key}')" style="background:#ef4444;color:white;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;font-size:0.85em">üóëÔ∏è ÏÇ≠Ï†ú</button>`:'';
            h+=`<div class="review-item" id="review-${key}"><div class="review-header" style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px"><div><span class="review-author">${x.author||'ÏùµÎ™Ö'}</span><span class="stars">${s}</span></div>${deleteBtn}</div><p class="review-text">${x.text||''}</p><span class="review-date">${x.date||''}</span></div>`;
        });
    }
    h+='</div>';
    const rating=currentPlugin.rating||0;
    const priceInfo=currentPlugin.type==='free'?'Î¨¥Î£å':`${(currentPlugin.price||0).toLocaleString()}Ïõê`;
    
    // Î≤ÑÏ†Ñ ÏÑ†ÌÉù UI Ï†úÍ±∞ (ÎßàÏù¥ÌéòÏù¥ÏßÄÏóêÏÑúÎßå Î≤ÑÏ†Ñ ÏÑ†ÌÉù)
    let versionSelector = '';
    
    document.getElementById('modalBody').innerHTML=`<p><strong>Ïπ¥ÌÖåÍ≥†Î¶¨:</strong> ${currentPlugin.category}</p><p><strong>ÌÉÄÏûÖ:</strong> ${currentPlugin.type==='free'?'Î¨¥Î£å':'Ïú†Î£å'}</p><p><strong>Í∞ÄÍ≤©:</strong> ${priceInfo}</p><p><strong>Î≤ÑÏ†Ñ:</strong> v${currentPlugin.version}</p><p><strong>ÌèâÏ†ê:</strong> ${rating.toFixed(1)}/5.0</p><p><strong>Îã§Ïö¥Î°úÎìú:</strong> ${currentPlugin.downloads}Ìöå</p><p style="margin-top:15px">${currentPlugin.description}</p>${versionSelector}${h}`;
    const b=document.getElementById('modalAction');
    if(!currentUser){b.innerHTML=withIcon('user','Î°úÍ∑∏Ïù∏');b.onclick=()=>openLoginModal();}
    else if(i){b.innerHTML=withIcon('star',u?'Î¶¨Î∑∞ ÏàòÏ†ï':'Î¶¨Î∑∞ ÏûëÏÑ±');b.onclick=()=>openReviewModal(pid)}
    else{b.innerHTML=withIcon(currentPlugin.type==='free'?'download':'cart',currentPlugin.type==='free'?'Îã§Ïö¥Î°úÎìú':'Íµ¨Îß§');b.onclick=()=>downloadPlugin(pid)}
    document.getElementById('detailModal').classList.add('active');
};

window.closeDetailModal=function(){document.getElementById('detailModal').classList.remove('active')};

window.downloadPlugin=async function(pid,forceDownload){
    if(!currentUser){openLoginModal();return}
    const p=plugins[pid];if(!p)return;
    
    // Î≤ÑÏ†Ñ Î™®Îã¨ ÏÇ¨Ïö© Ïïà Ìï®: Ïñ∏Ï†úÎÇò Ïã§Ìñâ Í≤ΩÎ°úÎ°ú ÏßÑÌñâ
    await executeDownload(pid);
};

window.redownloadPlugin=function(pid){
    if(!currentUser){openLoginModal();return}
    const p=plugins[pid];if(!p)return;
    let downloadUrl=p.downloadUrl;
    window.open(downloadUrl,'_blank');
};

async function executeDownload(pid){
    const p=plugins[pid];if(!p){alert('ÌîåÎü¨Í∑∏Ïù∏ Ï†ïÎ≥¥ ÏóÜÏùå!');return;}
    const isPaid=p.type==='paid'&&(p.price||0)>0;
    const alreadyPurchased=currentUser && currentUser.downloads && currentUser.downloads.some(d=>d.pluginId===pid);
    const firstTimeDownload=!alreadyPurchased;
    // PartyPlugin(Î≤ÑÏ†Ñ ÏûàÎäî ÌîåÎü¨Í∑∏Ïù∏) ÌäπÎ≥Ñ Ï≤òÎ¶¨: Íµ¨Îß§Îßå ÌïòÍ≥† ÎßàÏù¥ÌéòÏù¥ÏßÄÏóêÏÑú Î≤ÑÏ†Ñ Îã§Ïö¥Î°úÎìú
    if(p.id==='p10'){
        if(!alreadyPurchased){
            const allUsers=JSON.parse(localStorage.getItem('allUsers')||'{}');
            const userBalance=allUsers[currentUser.minecraftId]?.balance||0;
            const price=p.price||0;
            if(userBalance<price){alert('‚ùå ÏûîÏï°Ïù¥ Î∂ÄÏ°±Ìï©ÎãàÎã§!');return;}
            if(!confirm(`${p.name}ÏùÑ(Î•º) ${price.toLocaleString()}ÏõêÏóê Íµ¨Îß§ÌïòÏãúÍ≤†ÏäµÎãàÍπå?\nÎÇ®ÏùÄ ÏûîÏï°: ${(userBalance-price).toLocaleString()}Ïõê`)){return;}
            allUsers[currentUser.minecraftId].balance=userBalance-price;
            localStorage.setItem('allUsers',JSON.stringify(allUsers));
            try{ await database.ref(`users/${currentUser.minecraftId}/balance`).set(allUsers[currentUser.minecraftId].balance);}catch(e){}
            updateUserBalance();
            await updateDownloadInFirebase(pid);
            p.downloads++;
            const rec={pluginId:p.id,pluginName:p.name,date:new Date().toLocaleString('ko-KR')};
            if(!currentUser.downloads)currentUser.downloads=[];
            if(!currentUser.downloads.some(d=>d.pluginId===pid))currentUser.downloads.push(rec);
            try{ await database.ref(`users/${currentUser.minecraftId}/downloads/${p.id}`).set(rec);}catch(e){}
            saveLocal();
            localStorage.setItem('currentUser',JSON.stringify(currentUser));
            renderPlugins();
            selectedVersion=null;
            alert('Íµ¨Îß§ ÏôÑÎ£å! ÎßàÏù¥ÌéòÏù¥ÏßÄÏóêÏÑú Î≤ÑÏ†ÑÎ≥ÑÎ°ú Îã§Ïö¥Î°úÎìú ÌïòÏÑ∏Ïöî.');
            return;
        } else {
            let downloadUrl=p.downloadUrl;
            window.open(downloadUrl,'_blank');
            return;
        }
    }
    // ÏùºÎ∞ò Ïú†Î£å ÌîåÎü¨Í∑∏Ïù∏: Ï≤òÏùå Íµ¨Îß§ Ïãú ÏûîÏï° Ï∞®Í∞ê ÌõÑ Ï¶âÏãú Îã§Ïö¥Î°úÎìú
    if(isPaid && !alreadyPurchased){
        const allUsers=JSON.parse(localStorage.getItem('allUsers')||'{}');
        const userBalance=allUsers[currentUser.minecraftId]?.balance||0;
        const price=p.price||0;
        if(userBalance<price){alert('‚ùå ÏûîÏï°Ïù¥ Î∂ÄÏ°±Ìï©ÎãàÎã§!');return;}
        if(!confirm(`${p.name}ÏùÑ(Î•º) ${price.toLocaleString()}ÏõêÏóê Íµ¨Îß§ÌïòÏãúÍ≤†ÏäµÎãàÍπå?\nÎÇ®ÏùÄ ÏûîÏï°: ${(userBalance-price).toLocaleString()}Ïõê`)){return;}
        allUsers[currentUser.minecraftId].balance=userBalance-price;
        localStorage.setItem('allUsers',JSON.stringify(allUsers));
        try{ await database.ref(`users/${currentUser.minecraftId}/balance`).set(allUsers[currentUser.minecraftId].balance);}catch(e){}
        updateUserBalance();
    }
    // Îã§Ïö¥Î°úÎìú Ï≤òÎ¶¨
    if(firstTimeDownload){
        await updateDownloadInFirebase(pid);
        p.downloads++;
        const rec={pluginId:p.id,pluginName:p.name,date:new Date().toLocaleString('ko-KR')};
        try{ await database.ref(`users/${currentUser.minecraftId}/downloads/${p.id}`).set(rec);}catch(e){}
    }
    const rec={pluginId:p.id,pluginName:p.name,date:new Date().toLocaleString('ko-KR')};
    if(!currentUser.downloads)currentUser.downloads=[];
    if(!currentUser.downloads.some(d=>d.pluginId===pid))currentUser.downloads.push(rec);
    saveLocal();
    let downloadUrl = p.downloadUrl;
    if(selectedVersion && p.versions && p.versions[selectedVersion]) downloadUrl = p.versions[selectedVersion];
    window.open(downloadUrl, '_blank');
    localStorage.setItem('currentUser',JSON.stringify(currentUser));
    renderPlugins();
    selectedVersion = null;
}

// Î≤ÑÏ†Ñ Î™®Îã¨ÏùÄ ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÏùå (ÎßàÏù¥ÌéòÏù¥ÏßÄÏóêÏÑúÎßå Î≤ÑÏ†Ñ ÏÑ†ÌÉù)
window.showVersionModal=function(){alert('Î≤ÑÏ†Ñ ÏÑ†ÌÉùÏùÄ ÎßàÏù¥ÌéòÏù¥ÏßÄÏóêÏÑúÎßå Í∞ÄÎä•Ìï©ÎãàÎã§.');};
window.closeVersionModal=function(){};
window.confirmVersionDownload=function(){};

window.openReviewModal=function(pid){
    currentPlugin=plugins[pid];
    const isDownloaded=currentUser&&currentUser.downloads&&currentUser.downloads.some(d=>d.pluginId===pid);
    if(!isDownloaded){
        alert('‚ùå Î¶¨Î∑∞Îäî Îã§Ïö¥Î°úÎìúÌïú ÌîåÎü¨Í∑∏Ïù∏Îßå ÏûëÏÑ±Ìï† Ïàò ÏûàÏäµÎãàÎã§!');
        return;
    }
    const u=currentUser.reviews&&currentUser.reviews[pid];
    if(u){selectedRating=u.rating;document.getElementById('reviewText').value=u.text;document.querySelectorAll('#starRating .star').forEach((s,i)=>{if(i<selectedRating)s.classList.add('active');else s.classList.remove('active')})}else{selectedRating=0;document.getElementById('reviewText').value='';document.querySelectorAll('#starRating .star').forEach(s=>s.classList.remove('active'))}
    closeDetailModal();document.getElementById('reviewModal').classList.add('active');
};

window.closeReviewModal=function(){document.getElementById('reviewModal').classList.remove('active')};

window.submitReview=async function(){
    if(!currentUser||!currentPlugin)return;
    const isDownloaded=currentUser.downloads&&currentUser.downloads.some(d=>d.pluginId===currentPlugin.id);
    if(!isDownloaded){
        alert('‚ùå Î¶¨Î∑∞Îäî Îã§Ïö¥Î°úÎìúÌïú ÌîåÎü¨Í∑∏Ïù∏Îßå ÏûëÏÑ±Ìï† Ïàò ÏûàÏäµÎãàÎã§!');
        closeReviewModal();
        return;
    }
    if(selectedRating===0){alert('Î≥ÑÏ†êÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî');return}
    const t=document.getElementById('reviewText').value.trim();
    if(!t){alert('Î¶¨Î∑∞ ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî');return}
    const authorName=currentUser.actualMcName||currentUser.username||'ÏùµÎ™Ö';
    const r={author:authorName,rating:selectedRating,text:t,date:new Date().toLocaleString('ko-KR')};
    if(!currentPlugin.reviews)currentPlugin.reviews={};
    currentPlugin.reviews[currentUser.minecraftId]=r;
    const v=Object.values(currentPlugin.reviews);
    const a=v.reduce((s,x)=>s+x.rating,0)/v.length;
    currentPlugin.rating=Math.round(a*10)/10;
    if(!currentUser.reviews)currentUser.reviews={};
    currentUser.reviews[currentPlugin.id]=r;
    saveLocal();
    localStorage.setItem('currentUser',JSON.stringify(currentUser));
    closeReviewModal();
    closeDetailModal();
    alert('Î¶¨Î∑∞Í∞Ä Îì±Î°ùÎêòÏóàÏäµÎãàÎã§!');
    // Î¶¨Î∑∞ ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
    setTimeout(()=>{
        showDetail(currentPlugin.id);
    },100);
    // ÏùºÎ∞ò ÏÇ¨Ïö©Ïûê Î¶¨Î∑∞ ÏõπÌõÖ Ï†úÍ±∞ (Í¥ÄÎ¶¨ÏûêÎßå Î°úÍ∑∏)
};

window.deleteReview=function(pid,reviewKey){
    if(!confirm('Î¶¨Î∑∞Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?'))return;
    const plugin=plugins[pid];
    if(!plugin||!plugin.reviews)return;
    
    // Î¶¨Î∑∞ ÏÇ≠Ï†ú
    delete plugin.reviews[reviewKey];
    
    // ÏÇ¨Ïö©ÏûêÏùò Î¶¨Î∑∞ÎèÑ ÏÇ≠Ï†ú
    if(currentUser.reviews&&currentUser.reviews[pid]){
        delete currentUser.reviews[pid];
    }
    
    // ÌèâÏ†ê Ïû¨Í≥ÑÏÇ∞
    const v=Object.values(plugin.reviews);
    if(v.length===0){
        plugin.rating=0;
    }else{
        const a=v.reduce((s,x)=>s+x.rating,0)/v.length;
        plugin.rating=Math.round(a*10)/10;
    }
    
    saveLocal();
    localStorage.setItem('currentUser',JSON.stringify(currentUser));
    
    // Î™®Îã¨ Îã´Í≥† Îã§Ïãú Ïó¥Í∏∞
    closeDetailModal();
    setTimeout(()=>{
        showDetail(pid);
    },100);
    alert('Î¶¨Î∑∞Í∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§!');
};

window.showHistory=function(){
    if(!currentUser)return;
    const b=document.getElementById('historyBody');
    const d=currentUser.downloads||[];
    
    if(d.length===0){
        b.innerHTML='<p style="text-align:center;color:#999;padding:40px">Îã§Ïö¥Î°úÎìú ÎÇ¥Ïó≠Ïù¥ ÏóÜÏäµÎãàÎã§<br><br>üí° ÏÉÅÎã®ÏóêÏÑú ÌîåÎü¨Í∑∏Ïù∏ÏùÑ Îã§Ïö¥Î°úÎìúÌï¥Î≥¥ÏÑ∏Ïöî!</p>';
    }else{
        b.innerHTML=d.map(x=>{
            const plugin=plugins[x.pluginId];
            const pluginDesc=plugin?plugin.description:'ÌîåÎü¨Í∑∏Ïù∏ Ï†ïÎ≥¥ ÏóÜÏùå';
            const pluginVer=plugin?`v${plugin.version}`:'';
            const pluginType=plugin&&plugin.type==='paid'?`üí∞ ${(plugin.price||0).toLocaleString()}Ïõê Íµ¨Îß§`:'üéÅ Î¨¥Î£å Îã§Ïö¥Î°úÎìú';
            // party pluginÎßå Î≤ÑÏ†ÑÏÑ†ÌÉù
            if(plugin && plugin.id==='p10' && plugin.versions){
              const versionSelectId='redownloadVersion_p10'; // Í≥†Ïú† id(ÌïúÎ™ÖÎßå ÎÇ¥Ïó≠ ÏÉùÏÑ±Îê®)
              return`
                <div class="history-item" style="display:flex;justify-content:space-between;align-items:center;gap:15px;flex-wrap:wrap">
                  <div style="flex:1;min-width:200px">
                      <h3 style="margin-bottom:8px;color:var(--text-primary)">${x.pluginName}</h3>
                      <p style="color:var(--text-secondary);font-size:0.9em;margin-bottom:5px">${pluginDesc}</p>
                      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:8px">
                          <span style="background:var(--tag-bg);padding:4px 10px;border-radius:10px;font-size:0.85em;color:var(--text-secondary)">${pluginVer}</span>
                          <span style="background:#10b981;color:white;padding:4px 10px;border-radius:10px;font-size:0.85em">${pluginType}</span>
                      </div>
                      <p style="color:var(--text-tertiary);font-size:0.85em;margin-top:8px">üìÖ ${x.date}</p>
                      <div style="margin-top:13px">  
                        <select id="${versionSelectId}" style="padding:7px;border-radius:7px;margin-right:9px;">
                          <option value="">Í∏∞Î≥∏</option>
                          ${Object.keys(plugin.versions).map(v=>`<option value="${v}">${v}</option>`).join('')}
                        </select>
                        <button class="btn btn-primary" onclick="reDownloadVersion('p10')">üì• Î≤ÑÏ†ÑÎ≥Ñ Îã§Ïö¥Î°úÎìú</button>
                      </div>
                  </div>
                </div>`;
            }
            // ÎÇòÎ®∏ÏßÄ ÏùºÎ∞ò ÌîåÎü¨Í∑∏Ïù∏ ÎÇ¥Ïó≠
            return`
            <div class="history-item" style="display:flex;justify-content:space-between;align-items:center;gap:15px;flex-wrap:wrap">
                <div style="flex:1;min-width:200px">
                    <h3 style="margin-bottom:8px;color:var(--text-primary)">${x.pluginName}</h3>
                    <p style="color:var(--text-secondary);font-size:0.9em;margin-bottom:5px">${pluginDesc}</p>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:8px">
                        <span style="background:var(--tag-bg);padding:4px 10px;border-radius:10px;font-size:0.85em;color:var(--text-secondary)">${pluginVer}</span>
                        <span style="background:#10b981;color:white;padding:4px 10px;border-radius:10px;font-size:0.85em">${pluginType}</span>
                    </div>
                    <p style="color:var(--text-tertiary);font-size:0.85em;margin-top:8px">üìÖ ${x.date}</p>
                </div>
                <button class="btn btn-primary" onclick="reDownloadPlugin('${x.pluginId}')" style="padding:12px 24px;white-space:nowrap">${withIcon('download','Îã§Ïãú Îã§Ïö¥Î°úÎìú')}</button>
            </div>`;
        }).join('');
    }
    
    document.getElementById('historyModal').classList.add('active');
};

window.reDownloadVersion=function(pluginId){
    const plugin = plugins[pluginId];
    if(!plugin) { alert('ÌîåÎü¨Í∑∏Ïù∏ Ï†ïÎ≥¥ ÏóÜÏùå!'); return; }
    let downloadUrl = plugin.downloadUrl;
    // party ÌîåÎü¨Í∑∏Ïù∏ÏùÄ Î¨¥Ï°∞Í±¥ Î≤ÑÏ†Ñ ÎìúÎ°≠Îã§Ïö¥ Ï°¥Ïû¨
    const select = document.getElementById('redownloadVersion_p10');
    const version = select? select.value : '';
    if(version && plugin.versions && plugin.versions[version]){
        downloadUrl = plugin.versions[version];
    }
    window.open(downloadUrl, '_blank');
};

window.reDownloadPlugin=function(pluginId){
    closeHistoryModal();
    downloadPlugin(pluginId);
};

window.closeHistoryModal=function(){document.getElementById('historyModal').classList.remove('active')};

function toggleTheme(){
    const body=document.body;
    const isDark=body.classList.toggle('dark-mode');
    localStorage.setItem('theme',isDark?'dark':'light');
    updateThemeIcon();
}

function updateThemeIcon(){
    const toggle=document.querySelector('.theme-toggle');
    if(document.body.classList.contains('dark-mode')){
        toggle.innerHTML=withIcon('sun','');
    }else{
        toggle.innerHTML=withIcon('moon','');
    }
}

function loadTheme(){
    const savedTheme=localStorage.getItem('theme');
    if(savedTheme==='dark'){
        document.body.classList.add('dark-mode');
    }
    updateThemeIcon();
}

document.addEventListener('DOMContentLoaded',()=>{
    loadTheme();
    const searchBtn=document.getElementById('btnSearch');
    if(searchBtn){ searchBtn.innerHTML=withIcon('search',''); }
    init();
});
    </script>
</body>
</html>
